jQuery(document).ready(function(e){function t(){var t={connectWith:".ezfc-group",distance:5,forcePlaceholderSize:!0,handle:".ezfc-form-element-name",placeholder:"ui-state-highlight",stop:function(t,a){var o=e(a.item[0]),i=o.index("li");if(0>i)return!1;var l=o.parent().closest(".ezfc-form-element-group").data("id")||0;if(o.data("id")!=l){var c=o.closest(".ezfc-form-element");n(c),c.find("[data-element-name='group_id']").val(l)}}};e("#form-elements-list").sortable(t),e(".ezfc-group").sortable(e.extend(t,{connectWith:"#form-elements-list,.ezfc-group"})),e("#form-elements-list .ezfc-form-element").each(function(){var t=e(this).data("id"),a=e(this).data("group_id");if(a&&!(1>a)){var n=e(".ezfc-form-element[data-id='"+a+"']");if(n.data("group_id")!=t){var o=n.find("> .ezfc-group");!o||o.length<1||e(this).appendTo(o)}}}),e(".ezfc-elements-add .ezfc-elements li").draggable({connectToSortable:"#form-elements-list,.ezfc-group",helper:"clone",start:function(t,a){e(a.helper[0]).attr("id","ezfc-element-drag-placeholder")},stop:function(t,a){var n=e(a.helper[0]),o=n.parents("#form-elements-list").length>0;if(o){var i=e("#form-elements-list li").length-1,l=i-n.index("li"),c=n.parent().closest(".ezfc-form-element-group"),s=c.length?c.data("id"):0;h(n,{position:l,group_id:s}),e("#ezfc-element-drag-placeholder").html("<i class='fa fa-cog fa-spin'></i>")}else n.remove()}}),"undefined"!=typeof tinyMCE&&"function"==typeof tinyMCE.execCommand&&e(".ezfc-html").each(function(){tinyMCE.execCommand("mceRemoveEditor",!1,e(this).attr("id"))}),e(".ezfc-spinner").spinner(),a()}function a(){e(".ezfc-elements-show [data-ot]").each(function(t,a){e(a).opentip(e(a).data("ot"),{fixed:!0,tipJoint:"bottom"})})}function n(e){var t=e.find("> .ezfc-form-element-data:not(.ezfc-form-element-has-data)");t.addClass("ezfc-form-element-has-data");var a=e.data("id");if(ezfc_current_form_elements[a]){var n=ezfc_current_form_elements[a],o="";"fileupload"==ezfc.elements[n.e_id].type&&(o+="<p>"+ezfc_vars.texts.fileupload_conditional+"</p>"),o+=v(n),t.find(".noupdate-flag").remove(),t.append(o),z()}}function o(t){var a=e(t).find(".ezfc-form-element-calculate-wrapper");e(a).each(function(t,a){var n=e(a).find(".ezfc-form-element-calculate-operator :selected").val(),o=e(a).find(".ezfc-form-element-calculate-target"),i=e(a).find(".ezfc-form-element-calculate-value"),l=["floor","ceil","round","abs","subtotal"];e.inArray(n,l)>-1?(o.attr("disabled","disabled"),i.attr("disabled","disabled")):(o.removeAttr("disabled"),i.removeAttr("disabled"),0==o.val()?i.removeAttr("disabled"):i.attr("disabled","disabled"))});var n=e(t).find(".ezfc-form-element-conditional-wrapper");e(n).each(function(t,a){var n=e(a).find(".ezfc-form-element-conditional-action :selected").val(),o=e(a).find(".ezfc-form-element-conditional-target-value"),i=e(a).find(".ezfc-conditional-redirect-wrapper");"set"==n?o.removeAttr("disabled"):o.attr("disabled","disabled"),"redirect"==n?i.removeClass("ezfc-hidden"):i.addClass("ezfc-hidden")});var o=e(t).find("textarea.ezfc-html").attr("id");"undefined"!=typeof tinyMCE&&"function"==typeof tinyMCE.execCommand&&tinyMCE.execCommand("mceAddEditor",!1,o)}function l(t){var a="";a+="<li class='button ezfc-form' data-id='"+t.form.id+"' data-action='form_get' data-selectgroup='forms'>",a+="	<i class='fa fa-fw fa-list-alt'></i> ",a+=t.form.id+" - ",a+="	<span class='ezfc-form-name'>"+t.form.name+"</span>",a+="</li>",e(".ezfc-forms-list").append(a),e(".ezfc-form.button-primary").removeClass("button-primary"),e(".ezfc-form[data-id='"+t.form.id+"']").addClass("button-primary"),d(t)}function c(){e(".ezfc-form-element").remove()}function s(t){e(".ezfc-form-elements-actions, .ezfc-form-elements-container, .ezfc-form-options-wrapper").addClass("ezfc-hidden"),e(".ezfc-form[data-id='"+t+"']").remove()}function r(t){e(".ezfc-form-file[data-id='"+t+"']").remove()}function d(a){if(form_changed=!1,ezfc_fill_elements_html=-1,ezfc_fill_elements_filtered_html=-1,a){f(a.elements),e("#ezfc-form-save, #ezfc-form-delete, #ezfc-form-clear").data("id",a.form.id),e("#ezfc-shortcode-id").val("[ezfc id='"+a.form.id+"' /]"),e("#ezfc-shortcode-name").val("[ezfc name='"+a.form.name+"' /]"),e("#ezfc-form-name").val(w(a.form.name).replace(/&apos;/g,"'")),z(),m(a.options);var n=0;"undefined"!=typeof a.submissions_count&&(n=a.submissions_count),e("#ezfc-form-submissions-count").text(n);var o=parseInt(k("grid_12")),i=o?"ezfc-grid-12":"ezfc-grid-6";e("#form-elements-list").removeClass("ezfc-grid-6 ezfc-grid-12").addClass(i)}e(".ezfc-form-submissions").addClass("ezfc-hidden"),e(".ezfc-form-elements-actions, .ezfc-form-elements-container, .ezfc-form-options-wrapper").removeClass("ezfc-hidden");var l=e(".ezfc-forms-list .button-primary");e(".ezfc-forms-list").animate({scrollTop:l.scrollHeight},"slow"),elements_add_div=e("#ezfc-elements-add"),$=elements_add_div.offset().top,t(),C()}function f(a,n){var n=n||!1,o=[];n&&"undefined"!=typeof ezfc_current_form_elements||(ezfc_current_form_elements={}),a&&a.length>0&&e.each(a,function(e,t){o.push(p(t))}),n?e(".ezfc-form-elements").append(o.join("")):e(".ezfc-form-elements").html(o.join("")),z(!0,!0),t()}function m(t){ezfc_form_options=t,e.each(t,function(t,a){var n="#ezfc-table-option-"+a.id,o="#opt-"+a.id;switch(a.type){case"bool_text":a.value||(a.value={enabled:0,text:""}),e(n+" select option[value='"+a.value.enabled+"']").attr("selected","selected"),e(n+" input").val(a.value.text);break;case"border":a.value||(a.value={color:"",width:"",style:"",radius:""}),e(n+" .ezfc-element-border-color").val(a.value.color).trigger("change"),e(n+" .ezfc-element-border-width").val(a.value.width),e(n+" .ezfc-element-border-style option[value='"+a.value.style+"']").attr("selected","selected"),e(n+" .ezfc-element-border-radius").val(a.value.radius),a.value.transparent&&e(n+" .ezfc-element-border-transparent").attr("checked","checked");break;case"colorpicker":a.value||(a.value={color:"",transparent:!1}),e(n+" .ezfc-element-colorpicker-input").val(a.value.color).trigger("change"),a.value.transparent&&e(n+" .ezfc-element-colorpicker-transparent").attr("checked","checked");break;case"dimensions":a.value||(a.value={value:"",unit:""}),e(n+" input").val(a.value.value),e(n+" select option[value='"+a.value.unit+"']").attr("selected","selected");break;case"editor":try{e("#editor_"+a.id+"_ifr").contents().find("body").html(j(a.value))}catch(i){e("#editor_"+a.id+"_ifr").contents().find("body").text(j(a.value))}e("#editor_"+a.id).val(a.value);break;case"image":e(n+" .ezfc-image-upload-hidden").val(a.value),e(n+" img").attr("src",a.value);break;case"lang":case"yesno":e(o+" option").removeAttr("selected"),e(o+" option[value='"+a.value+"']").attr("selected","selected");break;default:e(o).val(a.value)}})}function u(t){t||(t={submissions:[]}),e(".ezfc-forms-list .button-primary .ezfc-submission-counter").text(t.submissions.length),form_changed=!1;var a="<ul>";e.each(t.submissions,function(n,o){var i=M(o.date),l="";1==o.payment_id&&(l+=" <i class='fa fa-fw fa-paypal' data-ot='PayPal used'></i>",l+=o.transaction_id.length>0?" <i class='fa fa-fw fa-check' data-ot='Payment verified.'></i>":" <i class='fa fa-fw fa-times' data-ot='Payment denied or cancelled'></i>"),a+="<li class='ezfc-form-submission' data-id='"+o.id+"'>",a+="	<div class='ezfc-form-submission-name'>",a+="		<i class='fa fa-fw fa-envelope'></i>"+l+" ID: "+o.id+" - "+i.toUTCString(),a+="		<button class='ezfc-form-submission-delete button' data-action='form_submission_delete' data-id='"+o.id+"'><i class='fa fa-times'></i></button>",a+="	</div>",a+="	<div class='ezfc-form-submission-data hidden'>",1==o.payment_id&&(a+="<div>",a+="	<p><strong>Paid with Paypal</strong></p>",a+="	<p>Transaction-ID: "+o.transaction_id,a+="</div>"),a+=o.content,t.files[o.ref_id]&&(a+="	<div class='ezfc-form-files'>",a+="		<p>Files</p>",e.each(t.files[o.ref_id],function(e,t){var n=t.url.split("/").slice(-1);a+="	<ul>",a+="		<li class='ezfc-form-file' data-id='"+t.id+"'>",a+="			<a href='"+t.url+"'>"+n+"</a>",a+="			<button class='ezfc-form-file-delete button' data-action='form_file_delete' data-id='"+t.id+"'><i class='fa fa-times'></i></button>",a+="	</li>",a+="	</ul>"}),a+="	</div>"),a+="</li>"}),a+="</ul>",e(".ezfc-form-submissions").removeClass("ezfc-hidden").html(a),e(".ezfc-form-elements-container, .ezfc-form-options-wrapper").addClass("ezfc-hidden"),e(".ezfc-form-submission-data h2").remove()}function p(t){ezfc_current_form_elements[t.id]=t;var a=e.parseJSON(t.data),n=1==ezfc_vars.editor.use_large_data_editor?"ezfc-form-element-data-fixed":"";if(!a){var o="";return o+="<li class='ezfc-form-element ezfc-form-element-error ezfc-col-6'>",o+="    <div class='ezfc-form-element-name'>Corrupt element",o+="        <button class='ezfc-form-element-delete button' data-action='form_element_delete' data-id='"+t.id+"'><i class='fa fa-times'></i></button>",o+="    </div>",o+="    <div class='container-fluid ezfc-form-element-data ezfc-form-element-input hidden "+n+"'>","object"==typeof t&&(o+="        <p>"+JSON.stringify(t)+"</p>"),o+="    </div>",o+="</li>"}ezfc_current_form_elements[t.id].data_json=a;var i=a.columns?a.columns:6,l=a.label?a.label:a.name,c=a.group_id?a.group_id:0,s="undefined"!=typeof a.required&&1==a.required?"*":"",r=[],d=_(t);d.hasOwnProperty("ext")&&r.push("<input type='hidden' value='"+d.id+"' name='elements["+t.id+"][extension]' />"),r.push("<input type='hidden' class='ezfc-form-element-e_id' value='"+t.e_id+"' name='elements["+t.id+"][e_id]' />"),r.push("<input type='hidden' class='noupdate-flag' value='1' name='elements["+t.id+"][__noupdate__]' />");var f="",m=" - <span class='element-label'>"+l+"</span>";f+="<li class='ezfc-form-element ezfc-cat-"+d.category+" ezfc-form-element-"+d.type+" ezfc-col-"+i+"' data-columns='"+i+"' data-id='"+t.id+"' data-group_id='"+c+"'>",f+="	<div class='ezfc-form-element-name'>","group"==d.type&&(f+="	<button class='ezfc-form-element-action ezfc-form-element-group-toggle button'><i class='fa fa-toggle-up'></i></button>"),f+="		<button class='ezfc-form-element-action ezfc-form-element-column-left button'><i class='fa fa-toggle-left'></i></button>",f+="		<button class='ezfc-form-element-action ezfc-form-element-column-right button'><i class='fa fa-toggle-right'></i></button>";var u="ID: "+t.id,p="";return V.element_has_calculation(t.data_json)&&(p+="&nbsp;"+I("Calculation","fa-calculator")),V.element_has_condition(t.data_json)&&(p+="&nbsp;"+I("Condition","fa-chain")),V.element_has_discount(t.data_json)&&(p+="&nbsp;"+I("Discount","fa-percent")),p.length>0&&(u+=" | "+p),f+="        <span class='ezfc-form-element-info'>"+u+" |</span>",f+="		<span class='fa fa-fw "+d.icon+"'></span>",f+="		<span class='ezfc-form-element-required-char'>"+s+"</span> ",f+="		<span class='ezfc-form-element-type'>"+d.name+"</span> "+m,"group"!=d.type&&(f+="		<button class='ezfc-form-element-duplicate button' data-action='form_element_duplicate' data-id='"+t.id+"'><i class='fa fa-files-o' data-ot='Duplicate element'></i></button>"),f+="		<button class='ezfc-form-element-delete button' data-action='form_element_delete' data-id='"+t.id+"'><i class='fa fa-times'></i></button>",f+="		</div>",f+="	<div class='container-fluid ezfc-form-element-data "+n+" ezfc-form-element-"+d.name.replace(" ","-").toLowerCase()+" hidden'>"+r.join("")+"</div>",1==ezfc_vars.editor.use_large_data_editor&&(f+="<button class='ezfc-form-element-close-data ezfc-form-element-close-data-fixed-left ezfc-hidden'><i class='fa fa-chevron-right'></i></button>"),"group"==d.type&&(f+="<ul class='ezfc-group'></ul>"),f+="</li>"}function v(t){var a=e.parseJSON(t.data),n=[],o=_(t),i="<div class='ezfc-form-element-advanced-actions'>";return"group"!=ezfc.elements[t.e_id].type&&(i+="	<button class='ezfc-form-element-change button' data-func='change_element_dialog' data-args='"+t.id+"'><i class='fa fa-exchange'></i> "+ezfc_vars.texts.change_element+"</button>"),i+="	<button class='ezfc-form-element-close-data button pull-right'>"+I("Close data","fa-times")+"</button>",i+="</div>",n.push(i),e.each(a,function(i,l){if("e_id"!=i&&"preselect"!=i&&"extension"!=i){var c="elements-"+i+"-"+t.id,s="elements["+t.id+"]",r="elements["+t.id+"]["+i+"]",d="";l=A(l),d+="<input type='text' value='"+l+"' name='"+r+"' data-element-name='"+i+"' id='"+c+"' />";var f=S(i);switch(i){case"columns":return columns=l,void n.push("<input name='"+r+"' id='"+c+"' data-element-name='"+i+"' type='hidden' value='"+l+"' />");case"group_id":return void n.push("<input class='ezfc-form-group-id' name='"+r+"' id='"+c+"' data-element-name='"+i+"' type='hidden' value='"+l+"' />");case"name":var m="group"==o.type||"html"==o.type||"placeholder"==o.type||"spacer"==o.type||"stepstart"==o.type||"stepend"==o.type?"element-label-listener":"";d="<input class='"+m+"' type='text' value='"+l+"' name='"+r+"' data-element-name='"+i+"' id='"+c+"' />",element_name_header=l;break;case"label":var m="group"!=o.type&&"html"!=o.type?"element-label-listener":"";d="<input class='"+m+"' type='text' value='"+l+"' name='"+r+"' data-element-name='"+i+"' id='"+c+"' />",element_name_header=l;break;case"html":var u="";1==ezfc_vars.editor.use_tinymce?(u="ezfc-html",d='<div class="wp-editor-tools hide-if-no-js"><div class="wp-media-buttons">',d+='<a href="#" id="insert-media-button" class="button insert-media add_media" data-editor="'+c+'" title="Add Media"><span class="wp-media-buttons-icon"></span> Add Media</a>',d+="<button class='button ezfc-html-tinymce-toggle' data-target='"+c+"'>Toggle view</button>",d+="</div></div>",d+="<textarea class='"+u+"' name='"+r+"' id='"+c+"'>"+w(l)+"</textarea>"):d="<textarea class='"+u+"' name='"+r+"' id='"+c+"'>"+w(l)+"</textarea>";break;case"required":req_char=1==l?"*":"",d="<select class='ezfc-form-element-required-toggle' name='"+r+"' id='"+c+"' data-element-name='"+i+"'>",d+="	<option value='0'>"+ezfc_vars.yes_no.no+"</option>",d+="	<option value='1'"+(1==l?"selected":"")+">"+ezfc_vars.yes_no.yes+"</option>",d+="</select>";break;case"add_line":case"add_linebreaks":case"add_to_price":case"allow_multiple":case"collapsible":case"do_shortcode":case"calculate_enabled":case"calculate_before":case"calculate_when_hidden":case"double_check":case"expanded":case"inline":case"is_currency":case"is_telephone_nr":case"overwrite_price":case"pips":case"read_only":case"set_use_factor":case"showWeek":case"slider":case"spinner":case"use_address":case"text_only":case"use_woocommerce_price":d="<select class='ezfc-form-element-"+i+"' name='"+r+"' id='"+c+"' data-element-name='"+i+"'>",d+="	<option value='0'>"+ezfc_vars.yes_no.no+"</option>",d+="	<option value='1'"+(1==l?"selected":"")+">"+ezfc_vars.yes_no.yes+"</option>",d+="</select>";break;case"hidden":d="<select class='ezfc-form-element-"+i+"' name='"+r+"' id='"+c+"' data-element-name='"+i+"'>",d+="	<option value='0'>"+ezfc_vars.yes_no.no+"</option>",d+="	<option value='1'"+(1==l?"selected":"")+">Yes</option>",d+="	<option value='2'"+(2==l?"selected":"")+">Conditional hidden</option>",d+="</select>";break;case"steps_slider":case"steps_spinner":case"steps_pips":d="<input class='ezfc-spinner' type='text' value='"+l+"' name='"+r+"' data-element-name='"+i+"' id='"+c+"' />";break;case"multiple":d="<select class='ezfc-form-element-multiple' name='"+r+"' id='"+c+"' data-element-name='"+i+"'>",d+="	<option value='0'>"+ezfc_vars.yes_no.no+"</option>",d+="	<option value='1'"+(1==l?"selected":"")+">"+ezfc_vars.yes_no.yes+"</option>",d+="</select>";break;case"options":d="<button class='button ezfc-form-element-option-add' data-element_id='"+t.id+"'>Add option</button></div>",d+="<div class='col-xs-3'>Value</div>",d+="<div class='col-xs-3'>Text</div>",d+="<div class='col-xs-3'>Image</div>",d+="<div class='col-xs-3'>",d+="	<abbr title='Preselect values'>Sel</abbr>&nbsp;",d+="	<abbr title='Disabled'>Dis</abbr>&nbsp;",d+="</div>",d+="<div class='ezfc-form-element-option-container ezfc-option-container'>";var p=0,v=a.preselect||0==a.preselect?a.preselect:"",_="",z="",h="";switch(o.type){case"checkbox":preselect_name=s+"[preselect_container]",z="checkbox",h=[],v.length>1&&(h=e.map(v.split(","),function(e){return parseInt(e)}));break;default:preselect_name=s+"[preselect]",z="radio",h=parseInt(v)}e.each(l,function(a,n){if(d+="<div class='ezfc-form-element-option' data-element_id='"+t.id+"'>",d+="	<div class='col-xs-3'><input class='ezfc-form-element-option-value small' name='"+r+"["+p+"][value]' value='"+n.value+"' type='text' /></div>",d+="	<div class='col-xs-3'><input class='ezfc-form-element-option-text' name='"+r+"["+p+"][text]' type='text' value='"+n.text+"' /></div>",d+="	<div class='col-xs-3'>","radio"==o.type||"checkbox"==o.type){var i="";n.image&&(i=n.image),d+="	<input class='ezfc-form-element-option-image' name='"+r+"["+p+"][image]' type='hidden' value='"+i+"' />",d+="	<img class='ezfc-option-image-placeholder' src='"+i+"' />",d+="	<button class='button ezfc-option-image-button' data-ot='Choose image'><i class='fa fa-image'></i></button>",d+="	<button class='button ezfc-option-image-remove' data-ot='Remove image'><i class='fa fa-times'></i></button>"}else"dropdown"==o.type&&(d+=ezfc_vars.unavailable_element);d+="	</div>",_="",_="checkbox"==o.type?-1!=e.inArray(p,h)?"checked='checked'":"":h==p?"checked='checked'":"",disabled_html=n.disabled?"checked='checked'":"",d+="	<div class='col-xs-3'>",d+="		<input class='ezfc-form-element-option-"+z+"' name='"+preselect_name+"' type='"+z+"' data-element_id='"+t.id+"' value='"+p+"' "+_+" />&nbsp;",d+="		<input class='ezfc-form-element-option-disabled' name='"+r+"["+p+"][disabled]' type='checkbox' data-element_id='"+t.id+"' value='1' "+disabled_html+" />&nbsp;",d+="		<button class='button ezfc-form-element-move ezfc-form-element-move-up' data-target='.ezfc-form-element-option' data-element_id='"+t.id+"'><i class='fa fa-sort-up'></i></button>",d+="		<button class='button ezfc-form-element-move ezfc-form-element-move-down' data-target='.ezfc-form-element-option' data-element_id='"+t.id+"'><i class='fa fa-sort-down'></i></button>",d+="		<button class='button ezfc-form-element-option-delete' data-target='.ezfc-form-element-option' data-element_id='"+t.id+"' data-target_row='"+p+"'><i class='fa fa-times'></i></button>",d+="	</div>",d+="	<div class='clearfix'></div>",d+="</div>",p++}),d+="</div>","checkbox"==z?d+="<input class='ezfc-form-option-preselect' type='hidden' name='"+s+"[preselect]' data-element_id='"+t.id+"' value='"+v+"' />":"radio"==z&&(_=-1==v?"checked='checked'":"",d+="<div class='col-xs-9'>No preselected value</div>",d+="<div class='col-xs-3'><input class='ezfc-form-element-option-radio' name='"+s+"[preselect]' type='radio' data-element_id='"+t.id+"' value='-1' "+_+" /></div>"),d+="<div>";break;case"calculate":d="<button class='button ezfc-form-element-option-add' data-element_id='"+t.id+"'>"+ezfc_vars.texts.add_calculation_field+"</button>&nbsp;",d+="<button class='ezfc-form-calculate-refresh button' data-ot='"+ezfc_vars.texts.refresh_fields+"'><span class='fa fa-refresh'></span></button>",d+="<a class='pull-right' href='http://ez-form-calculator.ezplugins.de/documentation/calculation/' target='_blank'>"+ezfc_vars.texts.documentation+"</a>",d+="</div>",d+="<div class='col-xs-2'>"+ezfc_vars.texts.operator+"</div>",d+="<div class='col-xs-5'>"+I(ezfc_vars.element_tip_description.calc_target_element)+" "+ezfc_vars.texts.target_element+"</div>",d+="<div class='col-xs-3'>"+I(ezfc_vars.element_tip_description.calc_target_value)+" "+ezfc_vars.texts.value+"</div>",d+="<div class='col-xs-2'></div>",d+="<div class='clearfix'></div>",d+="<div class='ezfc-form-element-option-container ezfc-option-container'>";var p=0;e.each(l,function(a,n){d+="<div class='ezfc-form-element-option ezfc-form-element-calculate-wrapper' data-element_id='"+t.id+"' data-row='"+p+"'>",d+="	<div class='col-xs-2'>",d+="		<select class='ezfc-form-element-calculate-operator' name='"+r+"["+p+"][operator]' data-element-name='"+i+"'>",e.each(E,function(e,t){var a="";n.operator==t.value&&(a="selected='selected'"),d+="<option value='"+t.value+"' "+a+">"+t.text+"</option>"}),d+="		</select>",d+="	</div>",d+="	<div class='col-xs-5'>",d+="		<select class='ezfc-form-element-calculate-target fill-elements' name='"+r+"["+p+"][target]' id='"+c+"-target' data-element-name='"+i+"' data-target='"+n.target+"'>",d+="		</select>",d+="	</div>",n.value||(n.value=""),d+="	<div class='col-xs-3'>",d+="		<input class='ezfc-form-element-calculate-value' name='"+r+"["+p+"][value]' id='"+c+"-value' data-element-name='"+i+"' value='"+n.value+"' type='text' />",d+="	</div>",d+="	<div class='col-xs-2'>",d+="		<button class='button ezfc-form-element-move ezfc-form-element-move-up' data-target='.ezfc-form-element-calculate-wrapper' data-element_id='"+t.id+"'><i class='fa fa-sort-up'></i></button>",d+="		<button class='button ezfc-form-element-move ezfc-form-element-move-down' data-target='.ezfc-form-element-calculate-wrapper' data-element_id='"+t.id+"'><i class='fa fa-sort-down'></i></button>",d+="		<button class='button ezfc-form-element-option-delete' data-target='.ezfc-form-element-calculate-wrapper' data-element_id='"+t.id+"'><i class='fa fa-times'></i></button>",d+="	</div>",d+="	<div class='clearfix'></div>",d+="</div>",p++}),d+="</div>",d+="<div>";break;case"conditional":d="<button class='button ezfc-form-element-option-add' data-element_id='"+t.id+"'>"+ezfc_vars.texts.add_conditional_field+"</button>&nbsp;",d+="<button class='ezfc-form-calculate-refresh button' data-ot='Refresh fields'><span class='fa fa-refresh'></span></button>",d+="<a class='pull-right' href='http://ez-form-calculator.ezplugins.de/documentation/conditional-fields/' target='_blank'>"+ezfc_vars.texts.documentation+"</a>",d+="</div>",d+="<div class='col-xs-2'>"+I(ezfc_vars.element_tip_description.action_perform)+" "+ezfc_vars.texts.action+"</div>",d+="<div class='col-xs-2'>"+I(ezfc_vars.element_tip_description.target_element)+" "+ezfc_vars.texts.target_element+"</div>",d+="<div class='col-xs-1'>"+I(ezfc_vars.element_tip_description.target_value)+" "+ezfc_vars.texts.target_value_short+"</div>",d+="<div class='col-xs-2'>"+I(ezfc_vars.element_tip_description.conditional_operator)+" "+ezfc_vars.texts.conditional_operator_short+"</div>",d+="<div class='col-xs-2'>"+I(ezfc_vars.element_tip_description.conditional_value)+" "+ezfc_vars.texts.value+"</div>",d+="<div class='col-xs-3'>"+I(ezfc_vars.element_tip_description.conditional_chain,"fa-chain")+" &nbsp; &nbsp;"+I(ezfc_vars.element_tip_description.conditional_row_operator)+" &nbsp; "+I(ezfc_vars.element_tip_description.conditional_toggle)+" &nbsp; "+I(ezfc_vars.element_tip_description.conditional_factor)+"</div>",d+="<div class='clearfix'></div>",d+="<div class='ezfc-form-element-option-container ezfc-option-container'>";var p=0;e.each(l,function(a,n){d+="<div class='ezfc-form-element-option ezfc-form-element-conditional-wrapper' data-element_id='"+t.id+"' data-row='"+p+"'>",d+="	<div class='col-xs-2'>",d+="		<select class='ezfc-form-element-conditional-action' name='"+r+"["+p+"][action]' id='"+c+"-action' data-element-name='"+i+"'>",e.each(N,function(e,t){var a="";n.action==t.value&&(a="selected='selected'"),d+="<option value='"+t.value+"' "+a+">"+t.text+"</option>"}),d+="		</select>",d+="	</div>",d+="	<div class='col-xs-2'>",d+="		<select class='ezfc-form-element-conditional-target fill-elements' name='"+r+"["+p+"][target]' data-element-name='"+i+"' data-target='"+n.target+"' data-show_all='true'>",d+="		</select>",d+="	</div>",n.target_value||(n.target_value=""),d+="	<div class='col-xs-1'>",d+="		<input class='ezfc-form-element-conditional-target-value' name='"+r+"["+p+"][target_value]' id='"+c+"-target-value' data-element-name='"+i+"' value='"+n.target_value+"' type='text' />",d+="	</div>",d+="	<div class='col-xs-2'>",d+="		<select class='ezfc-form-element-conditional-operator' name='"+r+"["+p+"][operator]' id='"+c+"-target' data-element-name='"+i+"'>",e.each(q,function(e,t){var a="";n.operator==t.value&&(a="selected='selected'"),d+="<option value='"+t.value+"' "+a+">"+t.text+"</option>"}),d+="		</select>",d+="	</div>",n.value||(n.value=""),d+="	<div class='col-xs-2'>",d+="		<input class='ezfc-form-element-conditional-value' name='"+r+"["+p+"][value]' id='"+c+"-value' data-element-name='"+i+"' value='"+n.value+"' type='text' />",d+="	</div>";var o=n.row_operator&&1==n.row_operator?"checked='checked'":"",l=n.notoggle&&1==n.notoggle?"checked='checked'":"",s=n.use_factor&&1==n.use_factor?"checked='checked'":"",f=[r,p].join(",");d+="	<div class='col-xs-3'>",d+="		<button class='button button-primary ezfc-form-element-conditional-chain-add' data-func='conditional_chain_add' data-args='"+f+"' id='"+c+"-chain' data-element-name='"+i+"'>"+I("Add condition","fa-plus-square-o")+"</button>",d+="		<input class='ezfc-form-element-conditional-row-operator' name='"+r+"["+p+"][row_operator]' id='"+c+"-row-operator' data-element-name='"+i+"' value='1' type='checkbox' "+o+" />",d+="		<input class='ezfc-form-element-conditional-notoggle' name='"+r+"["+p+"][notoggle]' id='"+c+"-notoggle' data-element-name='"+i+"' value='1' type='checkbox' "+l+" />",d+="		<input class='ezfc-form-element-conditional-use_factor' name='"+r+"["+p+"][use_factor]' id='"+c+"-use_factor' data-element-name='"+i+"' value='1' type='checkbox' "+s+" />",d+="		<button class='button ezfc-form-element-move ezfc-form-element-move-up' data-target='.ezfc-form-element-conditional-wrapper' data-element_id='"+t.id+"'><i class='fa fa-sort-up'></i></button>",d+="		<button class='button ezfc-form-element-move ezfc-form-element-move-down' data-target='.ezfc-form-element-conditional-wrapper' data-element_id='"+t.id+"'><i class='fa fa-sort-down'></i></button>",d+="		<button class='button ezfc-form-element-option-delete' data-target='.ezfc-form-element-conditional-wrapper' data-element_id='"+t.id+"'><i class='fa fa-times'></i></button>",d+="  </div>",d+="	<div class='clearfix'></div>",d+="	<div class='col-xs-4 ezfc-hidden ezfc-conditional-redirect-wrapper'>URL: ",d+="		<input class='ezfc-form-element-conditional-redirect' name='"+r+"["+p+"][redirect]' id='"+c+"-redirect' data-element-name='"+i+"' value='"+(n.redirect?n.redirect:"")+"' type='text' />",d+="  </div>",d+="	<div class='clearfix'></div>",n.operator_chain&&Object.keys(n.operator_chain).length>0&&e.each(n.operator_chain,function(e,t){var a=n.value_chain[e],o=r+"["+p+"][operator_chain]["+e+"]",i=r+"["+p+"][value_chain]["+e+"]";d+=V.conditional_chain_get_html(o,i,t,a)}),d+="</div>",p++}),d+="</div>",d+="<div>";break;case"discount":d="<button class='button ezfc-form-element-option-add' data-element_id='"+t.id+"'>Add discount field</button>&nbsp;",d+="<button class='ezfc-form-calculate-refresh button' data-ot='Refresh fields'><span class='fa fa-refresh'></span></button>",d+="</div>",d+="<div class='col-xs-3'>"+I(ezfc_vars.element_tip_description.discount_value_min)+" "+ezfc_vars.texts.value_min+"</div>",d+="<div class='col-xs-3'>"+I(ezfc_vars.element_tip_description.discount_value_max)+" "+ezfc_vars.texts.value_max+"</div>",d+="<div class='col-xs-2'>"+I(ezfc_vars.element_tip_description.discount_operator)+" Op</div>",d+="<div class='col-xs-3'>"+I(ezfc_vars.texts.discount_value)+" "+ezfc_vars.texts.discount_value+"</div>",d+="<div class='col-xs-1'>"+ezfc_vars.texts.remove+"</div>",d+="<div class='clearfix'></div>",d+="<div class='ezfc-form-element-option-container ezfc-option-container'>";var p=0;e.each(l,function(a,n){d+="<div class='ezfc-form-element-option ezfc-form-element-discount-wrapper' data-element_id='"+t.id+"' data-row='"+p+"'>",d+="	<div class='col-xs-3'>",d+="		<input class='ezfc-form-element-discount-range_min' name='"+r+"["+p+"][range_min]' id='"+c+"-value' data-element-name='"+i+"' value='"+n.range_min+"' type='text' />",d+="	</div>",d+="	<div class='col-xs-3'>",d+="		<input class='ezfc-form-element-discount-range_max' name='"+r+"["+p+"][range_max]' id='"+c+"-value' data-element-name='"+i+"' value='"+n.range_max+"' type='text' />",d+="	</div>",d+="	<div class='col-xs-2'>",d+="		<select class='ezfc-form-element-discount-operator' name='"+r+"["+p+"][operator]' data-element-name='"+i+"'>",e.each(D,function(e,t){var a="";n.operator==t.value&&(a="selected='selected'"),d+="<option value='"+t.value+"' "+a+">"+t.text+"</option>"}),d+="		</select>",d+="	</div>",d+="	<div class='col-xs-3'>",d+="		<input class='ezfc-form-element-discount-discount_value' name='"+r+"["+p+"][discount_value]' id='"+c+"-value' data-element-name='"+i+"' value='"+n.discount_value+"' type='text' />",d+="	</div>",d+="	<div class='col-xs-1'>",d+="		<button class='button ezfc-form-element-option-delete' data-target='.ezfc-form-element-discount-wrapper' data-element_id='"+t.id+"'><i class='fa fa-times'></i></button>",d+="	</div>",d+="	<div class='clearfix'></div>",d+="</div>",p++}),d+="</div>",d+="<div>";break;case"set":d="<button class='button ezfc-form-element-option-add' data-element_id='"+t.id+"'>Add element to set</button>&nbsp;",d+="<button class='ezfc-form-calculate-refresh button' data-ot='Refresh fields'><span class='fa fa-refresh'></span></button>",d+="</div>",d+="<div class='col-xs-12'>Element / Remove</div>",d+="<div class='clearfix'></div>",d+="<div class='ezfc-form-element-option-container ezfc-option-container'>";var p=0;e.each(l,function(e,a){d+="<div class='ezfc-form-element-option ezfc-form-element-set-wrapper' data-element_id='"+t.id+"' data-row='"+p+"'>",d+="	<div class='ezfc-form-element-set-element'>",d+="		<select class='ezfc-form-element-set-target fill-elements' name='"+r+"["+p+"][target]' data-element-name='"+i+"' data-target='"+a.target+"'>",d+="		</select>",d+="		<button class='button ezfc-form-element-option-delete' data-target='.ezfc-form-element-set-wrapper' data-element_id='"+t.id+"'><i class='fa fa-times'></i></button>",d+="	</div>",d+="</div>",p++}),d+="</div>",d+="<div>";break;case"set_operator":d="<select class='ezfc-form-element-"+i+"' name='"+r+"' id='"+c+"' data-element-name='"+i+"'>",e.each(R,function(e,t){var a="";l==t.value&&(a="selected='selected'"),d+="<option value='"+t.value+"' "+a+">"+t.text+"</option>"}),d+="</select>";break;case"image":d+="<button class='button ezfc-image-upload'>"+ezfc_vars.texts.choose_image+"</button>",d+="<br><img src='"+l+"' class='ezfc-image-preview' />";break;case"slidersteps":d="<input class='ezfc-spinner' name='"+r+"' value='"+l+"' />";break;case"icon":d+="<button class='button ezfc-icon-button' data-target='"+c+"'>"+ezfc_vars.texts.choose_icon+"</button>",d+="<i class='fa "+l+"' id='"+c+"-icon' data-previewicon></i>";break;case"post_id":d="<select class='ezfc-form-element-"+i+"' name='"+r+"' id='"+c+"' data-element-name='"+i+"'>",e.each(ezfc_wp_posts,function(e,t){var a="";l==t.id&&(a="selected='selected'"),d+="<option value='"+t.id+"' "+a+">"+t.title+"</option>"}),d+="</select>";break;case"custom_calculation":d="<textarea class='ezfc-custom-calculation' name='"+r+"' id='"+c+"'>"+w(l)+"</textarea>",d+="<button class='ezfc-open-function-dialog'>"+ezfc_vars.texts.functions+"</button>";break;case"show_in_email":d="<select class='ezfc-form-element-"+i+"' name='"+r+"' id='"+c+"' data-element-name='"+i+"'>";var g=[[0,ezfc_vars.yes_no.no],[1,ezfc_vars.yes_no.yes],[2,ezfc_vars.texts.show_if_not_empty],[3,ezfc_vars.texts.show_if_not_empty_0]];e.each(g,function(e,t){var a="";l==t[0]&&(a="selected='selected'"),d+="<option value='"+t[0]+"' "+a+">"+t[1]+"</option>"}),d+="</select>";break;case"tag":d=Y("select",r,{options:[{value:"h1",text:"h1"},{value:"h2",text:"h2"},{value:"h3",text:"h3"},{value:"h4",text:"h4"},{value:"h5",text:"h5"},{value:"h6",text:"h6"}],selected:l})}n.push("<div class='row'>"),n.push("	<div class='col-xs-4'>"),f.length>0&&n.push("		<span class='fa fa-question-circle' data-ot='"+f+"'></span> &nbsp;"),n.push("		<label for='"+r+"'>"+i.capitalize()+"</label>"),n.push("	</div>"),n.push("	<div class='col-xs-8'>"),n.push(d),n.push("	</div>"),n.push("</div>")}}),n.join("")}function _(t){var a=e.parseJSON(t.data);if(0==t.e_id){is_extension=!0,
extension_id=a.extension;var n=e(".ezfc-element[data-id='"+extension_id+"']");if(n.length<1)return;var o=n.data("extension_data");data_element_wrapper={ext:!0,icon:o.icon,name:o.name,type:o.type}}else data_element_wrapper=ezfc.elements[t.e_id];return data_element_wrapper}function z(t,a){if(-1==ezfc_fill_elements_html||a){var n=e(".ezfc-form-element-data"),o=n.not(".ezfc-form-element-email, .ezfc-form-element-date, .ezfc-form-element-image, .ezfc-form-element-line, .ezfc-form-element-date, .ezfc-form-element-html, .ezfc-form-element-recaptcha, .ezfc-form-element-file-upload, .ezfc-form-element-group, .ezfc-form-element-spacer, .ezfc-form-element-placeholder, .ezfc-form-element-stepstart, .ezfc-form-element-stepend");ezfc_fill_elements_html="<option value='0'> </option>",e(n).each(function(t,a){var n,o,i=e(a).closest(".ezfc-form-element"),l=i.data("id"),c=ezfc_current_form_elements[l];if(i.find("> .ezfc-form-element-data").hasClass("ezfc-form-element-has-data")){var s="input[data-element-name='name']",r=".ezfc-form-element-type";i.hasClass("ezfc-form-element-group")&&(s="> .ezfc-form-element-data "+s,r="> .ezfc-form-element-name "+r),n=i.find(s).val(),o=i.find(r).text()}else n=ezfc_current_form_elements[c.id].data_json.name,o=ezfc.elements[c.data_json.e_id].type;ezfc_fill_elements_html+="<option value='"+l+"'>"+n+" ("+o+")</option>"}),ezfc_fill_elements_filtered_html="<option value='0'> </option>",e(o).each(function(t,a){var n,o,i=e(a).closest(".ezfc-form-element"),l=i.data("id"),c=ezfc_current_form_elements[l];if(i.find("> .ezfc-form-element-data").hasClass("ezfc-form-element-has-data")){var s="input[data-element-name='name']",r=".ezfc-form-element-type";i.hasClass("ezfc-form-element-group")&&(s="> .ezfc-form-element-data "+s,r="> .ezfc-form-element-name "+r),n=i.find(s).val(),o=i.find(r).text()}else n=ezfc_current_form_elements[c.id].data_json.name,o=ezfc.elements[c.data_json.e_id].type;ezfc_fill_elements_filtered_html+="<option value='"+l+"'>"+n+" ("+o+")</option>"})}e(".fill-elements").each(function(t,a){var n=e(this).find(":selected").val()||e(this).data("target"),o=e(this).data("show_all")?!0:!1,i=e(this).hasClass("ezfc-form-element-calculate-target"),l=e(this).hasClass("ezfc-form-element-conditional-target"),c=o?ezfc_fill_elements_html:ezfc_fill_elements_filtered_html;l&&(c+="<option value='submit_button'>"+ezfc_vars.submit_button+"</option>"),e(a).html(c);var s=e(a).parent();if(i){var r=e(this).closest(".ezfc-form-element-calculate-wrapper").find(".ezfc-form-element-calculate-operator");s.parent().find(".ezfc-form-element-calculate-operator option[value='"+r+"']").prop("selected","selected"),s.parent().find(".ezfc-form-element-calculate-target option[value='"+n+"']").prop("selected","selected")}else l?(s.find(".ezfc-form-element-conditional-action option[value='"+n+"']").prop("selected","selected"),s.find(".ezfc-form-element-conditional-target option[value='"+n+"']").prop("selected","selected")):e(this).hasClass("ezfc-form-element-set-target")&&s.find(".ezfc-form-element-set-target option[value='"+n+"']").prop("selected","selected")})}function h(a,o){e(".ezfc-loading").fadeIn("fast");var i,m=e(a).data("action"),v=e(".ezfc-forms-list .button-primary").data("id"),_=e(a).data("id"),h="action="+m;switch(m){case"form_add":case"form_add_template_elements":_=e("#ezfc-form-template-id option:selected").val();break;case"form_duplicate":c(_);break;case"form_element_add":if(!v)return!1;var y=_;if(0!=e(a).data("extension")&&(h+="&extension=1"),o)for(key in o)h+="&element_settings["+key+"]="+o[key];h+="&e_id="+y+"&f_id="+v;break;case"form_element_change":h+="&fe_id="+ezfc_selected_element;break;case"form_clear":case"form_delete":case"form_delete_submissions":case"form_submission_delete":case"form_template_delete":case"form_file_delete":if("form_template_delete"==m&&(_=e("#ezfc-form-template-id option:selected").val(),0==_))return e(".ezfc-loading").hide(),!1;if(!confirm(ezfc_vars.delete_element))return e(".ezfc-loading").hide(),!1;break;case"form_element_delete":var w=e(a).closest(".ezfc-form-element");if(w.hasClass("ezfc-form-element-group")){var k=[];w.find(".ezfc-form-element").each(function(){k.push(e(this).data("id"))}),h+="&child_element_ids="+k.join(",")}if(!confirm(ezfc_vars.delete_element))return e(".ezfc-loading").hide(),!1;break;case"form_show":return e(".ezfc-loading").hide(),d(null),!1;case"form_show_import":return e(".ezfc-loading").hide(),e(".ezfc-import-dialog").dialog("open"),e("#form-import-data").val(""),!1;case"form_import_data":h+="&import_data="+encodeURIComponent(e("#form-import-data").val().replace(/'/g,"&apos;"));break;case"form_save":case"form_save_post":case"form_preview":"form_preview"==m&&e(".ezfc-form-element").each(function(){n(e(this))}),"undefined"!=typeof tinyMCE&&tinyMCE.triggerSave(),i=e("#form-elements [disabled='disabled']"),i.removeAttr("disabled"),e(".ezfc-form-element-checkbox").each(function(){var t=e(this).find("input[name*='preselect_container']").length>0;if(t){var a=[];e(this).find("input[name*='preselect_container']").each(function(t,n){e(n).is(":checked")&&a.push(e(n).val())}),e(this).find(".ezfc-form-option-preselect").val(a.join(","))}});var C=encodeURIComponent(JSON.stringify(e("#form-elements").serializeArray())),j=e("#form-options").serialize(),I=encodeURIComponent(e("#ezfc-form-name").val());h+="&elements="+C+"&ezfc-form-name="+I+"&"+j,("form_save_post"==m||"form_preview"==m)&&(_=v);break;case"form_show_options":return e(".ezfc-loading").hide(),e(".ezfc-options-dialog").dialog("open"),!1;case"form_update_options":"undefined"!=typeof tinyMCE&&tinyMCE.triggerSave();var S=e("#form-options").serialize();h+="&"+S;break;case"form_element_duplicate":if(e(a).parents(".ezfc-form-element-name").hasClass("ezfc-changed")){var M=e(a).closest(".ezfc-form-element").find(".ezfc-form-element-data").find("input, select, textarea").serialize();h+="&"+M}break;case"toggle_element_info":return e(".ezfc-form-element-info").toggle(),e(".ezfc-loading").hide(),!1}return _&&(h+="&id="+_),v&&(h+="&f_id="+v),h+="&nonce="+ezfc_nonce,e.ajax({type:"post",url:ajaxurl,data:{action:"ezfc_backend",data:h},success:function(n){e(".ezfc-loading").fadeOut("fast"),1==ezfc_debug_mode&&console&&console.log(n);var v;try{v=e.parseJSON(n)}catch(h){return e(".ezfc-error").text("Unable to perform action "+m+": "+n),!1}if(!v)return e(".ezfc-error").text("Something went wrong. :("),!1;if(v.error)return"form_update_options"==m?x(v.error_options):b(v.error),!1;switch(e(".ezfc-error").text(""),v.message&&g(v.message),v.download_url&&e("body").append("<iframe src='"+v.download_url+"' style='display: none;' ></iframe>"),m){case"element_get":element_show(v.element[0]);break;case"form_add":case"form_duplicate":l(v);break;case"form_add_template_elements":f(v.elements,!0);break;case"form_delete_submissions":u();break;case"form_get":d(v);break;case"form_get_submissions":u(v);break;case"form_clear":c();break;case"form_delete":form_changed=!1,s(_);break;case"form_file_delete":r(_);break;case"form_preview":if(!v.preview_url)return void console.log("Error",v);var y=decodeURIComponent(v.preview_url);window.open(y,"ezfc_"+_);break;case"form_save_post":case"form_save":form_changed=!1,e(".ezfc-changed").removeClass("ezfc-changed"),i.attr("disabled","disabled");var w=e("#ezfc-form-name").val();e(".ezfc-form[data-id='"+_+"'] .ezfc-form-name").text(w),e("#ezfc-shortcode-name").val("[ezfc name='"+w+"' /]"),"form_save_post"==m&&window.open(decodeURIComponent(v.success),"ezfc_"+_);break;case"form_save_template":var k=e("#ezfc-form-name").val();e("#ezfc-form-template-id").append("<option value='"+v+"'>"+k+"</option>");break;case"form_template_delete":e("#ezfc-form-template-id option[value='"+_+"']").remove();break;case"form_element_change":var C=p(v);e(".ezfc-form-element[data-id='"+ezfc_selected_element+"']").replaceWith(C),e("#ezfc-change-element-dialog").dialog("close"),z(),t();break;case"form_element_delete":e(a).closest(".ezfc-form-element").remove(),z();break;case"form_element_add":case"form_element_duplicate":var C=p(v);o?(e("#ezfc-element-drag-placeholder").after(C),e("#ezfc-element-drag-placeholder").remove()):e(".ezfc-form-elements").append(C),z(),t();break;case"form_submission_delete":e(a).parents(".ezfc-form-submission").remove();var j=e(".ezfc-forms-list .button-primary .ezfc-submission-counter"),I=parseInt(j.text());j.text(I-1);break;case"form_update_options":e(".ezfc-forms-list li[data-id='"+_+"'] .ezfc-form-name").text(e("#opt-name").val()),e(".ezfc-dialog").dialog("close");break;case"form_import_data":l(v),d(v),e(".ezfc-dialog").dialog("close");break;case"form_show_export":e("#form-export-data").val(JSON.stringify(v)),e(".ezfc-export-dialog").dialog("open")}e("#form-elements-list").is(":empty")?e("#empty-form-text").show():e("#empty-form-text").hide()}}),!1}function g(t,a,n){var o=n?".ezfc-error":".ezfc-message";a?e(o).append(t).slideDown():e(o).text(t).slideDown(),n||setTimeout(function(){e(o).slideUp()},7500)}function b(e,t){g(e,t,!0)}function x(t){var a=[];try{a=e.parseJSON(t)}catch(n){console.log("Something went wrong",n)}e(".ezfc-form-option-error-message").remove(),e.each(a,function(t,a){e("#ezfc-option-"+a.id).append("<p class='ezfc-form-option-error-message ezfc-color-error'>"+a.error+"</p>")})}function y(t){form_changed=!0,e(t).closest(".ezfc-form-element").find("> .ezfc-form-element-name").addClass("ezfc-changed")}function w(e){return(e+"").replace(/\\(.?)/g,function(e,t){switch(t){case"\\":return"\\";case"0":return"\x00";case"":return"";default:return t}})}function k(e){for(i in ezfc_form_options)if(ezfc_form_options[i].name==e){var t="undefined"==typeof ezfc_form_options[i].name?!1:ezfc_form_options[i].value;return t}return!1}function C(t,a){var n=e(t).closest(".ezfc-form-element"),o=n.data("columns"),i=parseInt(k("grid_12")),l=i?12:6,c=Math.min(l,Math.max(1,o+a));n.removeClass("ezfc-col-"+o).addClass("ezfc-col-"+c).data("columns",c).find("> .ezfc-form-element-data [data-element-name='columns']").val(c)}function j(e,t){var a=t||"undefined"==typeof t?"<br />":"<br>";return(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+a+"$2")}function I(e,t){return t=t||"fa-question-circle","<span class='fa "+t+"' data-ot='"+O(e)+"'></span>"}function S(e){return ezfc_vars.element_option_description[e]?ezfc_vars.element_option_description[e]:""}function M(e){var t=e.split(" "),a=t[0].split("-"),n=t[1].split(":");return new Date(a[0],parseInt(a[1])-1,a[2],n[0],n[1],n[2])}function A(t){return"string"==typeof t?t=t.replace("'","&apos;"):"object"==typeof t&&e.each(t,function(e,a){t[e]=A(a)}),t}function O(e){return e=e.replace("'","&#x27;"),e=e.replace('"',"&quot;")}e.fx.speeds._default=200,"undefined"!=typeof tinyMCE&&tinyMCE.init({plugins:"wordpress wplink",menubar:!1}),e(".ezfc-element-colorpicker-input").wpColorPicker(),ezfc_elements_data=[],ezfc_form_options=[],ezfc_z_index=1e5,form_changed=!1;var E=[{value:"0",text:" "},{value:"add",text:"+"},{value:"subtract",text:"-"},{value:"multiply",text:"*"},{value:"divide",text:"/"},{value:"equals",text:"="},{value:"power",text:"^"},{value:"floor",text:"floor"},{value:"ceil",text:"ceil"},{value:"round",text:"round"},{value:"abs",text:"abs"},{value:"subtotal",text:"subtotal"},{value:"log",text:"log"},{value:"log2",text:"log2"},{value:"log10",text:"log10"}],D=[{value:"0",text:" "},{value:"add",text:"+"},{value:"subtract",text:"-"},{value:"percent_add",text:"%+"},{value:"percent_sub",text:"%-"},{value:"equals",text:"="}],q=[{value:"0",text:" "},{value:"gr",text:">"},{value:"gre",text:">="},{value:"less",text:"<"},{value:"lesse",text:"<="},{value:"equals",text:"="},{value:"not",text:"not"},{value:"between",text:"between"},{value:"hidden",text:"is hidden"},{value:"visible",text:"is visible"},{value:"mod0",text:"%x = 0"},{value:"mod1",text:"%x != 0"},{value:"bit_and",text:"bitwise AND"},{value:"bit_or",text:"bitwise OR"},{value:"empty",text:"empty"},{value:"notempty",text:"not empty"},{value:"in",text:"in"}],N=[{value:"0",text:" "},{value:"show",text:"Show"},{value:"hide",text:"Hide"},{value:"set",text:"Set"},{value:"activate",text:"Activate"},{value:"deactivate",text:"Deactivate"},{value:"redirect",text:"Redirect"},{value:"step_goto",text:"Go to step"},{value:"step_next",text:"Next step"},{value:"step_prev",text:"Previous step"}],R=[{value:"min",text:"Minimum"},{value:"max",text:"Maximum"},{value:"avg",text:"Average"},{value:"sum",text:"Sum"},{value:"dif",text:"Difference"},{value:"prod",text:"Product"},{value:"quot",text:"Quotient"}];e("#tabs").tabs(),e(".ezfc-accordion").accordion({heightStyle:"content"});var U={autoOpen:!1,height:Math.min(800,e(window).height()-200),width:Math.min(1200,e(window).width()-200),modal:!0},J={buttons:{"Update options":function(){e(".ezfc-option-save").click()},Close:function(){e(this).dialog("close")}}},P={buttons:{"Import text data":function(){e("[data-action='form_import_data']").click()},Close:function(){e(this).dialog("close")}}},T={buttons:{Close:function(){e(this).dialog("close")}}};e(".ezfc-options-dialog").dialog(e.extend(U,J)),e(".ezfc-import-dialog").dialog(e.extend(U,P)),e(".ezfc-default-dialog").dialog(e.extend(U,T)),e(document).on("click","[data-action]",function(){if("form_get"==e(this).data("action")&&form_changed&&!confirm(ezfc_vars.form_changed))return e(".ezfc-loading").hide(),!1;var t=e(this).data("selectgroup");return t&&(e(".button-primary[data-selectgroup='"+t+"']").removeClass("button-primary"),e(this).addClass("button-primary")),h(e(this)),!1}),e(document).on("click",".ezfc-form-element-name, .ezfc-form-element-close-data",function(){var t=e(this).closest(".ezfc-form-element"),i=t.find("> .ezfc-form-element-data");if(n(t),i.toggle().css("z-index",++ezfc_z_index),1==ezfc_vars.editor.use_large_data_editor){var l=e("#ezfc-element-data-modal");l.is(":visible")?l.fadeOut():l.fadeIn()}return o(i),a(),!1}),e(document).on("click","#ezfc-element-data-modal",function(){V.close_data_dialog()}),e(document).keyup(function(e){27==e.keyCode&&V.close_data_dialog()}),e(document).on("click",".ezfc-form-submission-name",function(){e(this).parent().find(".ezfc-form-submission-data").toggle()}),e(document).on("click",".ezfc-image-upload",function(t){t.preventDefault();var a,n=this;a=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1}),a.on("select",function(){var t=a.state().get("selection").first().toJSON();e(n).parent().find("input").val(t.url),e(n).parent().find(".ezfc-image-preview").attr("src",t.url)}),a.open()}),e(document).on("click",".ezfc-clear-image",function(){var t=e(this).parent();return t.find("input").val(""),t.find("img").attr("src",""),!1}),e(document).on("click",".ezfc-form-element-option-add",function(){form_changed=!0;var t=e(this).closest(".row").find(e(".ezfc-form-element-option-container")),a=e(this).data("element_id"),n=t.find(".ezfc-form-element-option:last"),i=t.find(".ezfc-form-element-option").length;return n.clone().insertAfter(n).find("input, select, textarea").each(function(){var t,n=e(this).attr("name").replace(/\]/g,"").split("["),o=n.slice(),l=n[2],c=n.splice(-1),s=parseInt(e(this).val());"radio"==e(this).attr("type")||"preselect_container"==c?(t="elements["+a+"]["+c+"]",e(this).val(s+1)):t=6==o.length?"elements["+a+"]["+l+"]["+i+"]["+o[4]+"]["+o[5]+"]":"elements["+a+"]["+l+"]["+i+"]["+c+"]","value"!=c||isNaN(s)||e(this).val(s+1),e(this).attr("name",t)}),o(e(this).closest(".ezfc-form-element-data")),!1}),e(document).on("click",".ezfc-form-element-option-delete",function(){var t=e(this).closest(".ezfc-form-element-option"),a=e(this).closest(".ezfc-option-container"),n=a.find("> .ezfc-form-element-option").length;return 1>=n?a.find(":input").val(""):t.remove(),!1}),e(document).on("click",".ezfc-form-element-move",function(){var t,a=e(this).data("target"),n=e(this).closest(a);if(e(this).hasClass("ezfc-form-element-move-up")){if(e(n).prev(a).length<1)return!1;t=e(n).prev(a),e(n).slideUp(function(){e(n).after(e(n).prev(a)).slideDown()})}else{if(e(n).next(a).length<1)return!1;t=e(n).next(a),e(n).slideUp(function(){e(n).before(e(n).next(a)).slideDown()})}e(n).find("select, input").each(function(){var a=e(this).attr("class"),n=e(this).attr("name"),o=e(t).find("[class='"+a+"']").attr("name");e(this).attr("name",o),e(t).find("[class='"+a+"']").attr("name",n)});var o=e(n).find("input[name*='preselect']"),i=e(t).find("input[name*='preselect']");if(o&&i&&o.attr("type")){var l=o.val(),c=i.val();o.val(c),i.val(l)}return!1});var Q=".ezfc-form-element-calculate-target, .ezfc-form-element-calculate-operator, .ezfc-form-element-conditional-action";if(e(document).on("change",Q,function(){o(e(this).closest(".ezfc-form-element-data"))}),e(document).on("click",".ezfc-form-calculate-refresh",function(){return z(!1,!0),!1}),e(document).on("keyup",".ezfc-form-element-data .element-label-listener",function(){var t=e(this).val();e(this).closest(".ezfc-form-element").find("> .ezfc-form-element-name .element-label").text(t)}),e(document).on("keyup change",".ezfc-form-element-data input, .ezfc-form-element-data select",function(){y(this)}),e(document).on("click",".ezfc-form-element-data button:not(.ezfc-form-element-close-data)",function(){y(this)}),e(document).on("click",".ezfc-form-element-required-toggle",function(){form_changed=!0;var t=1==e(this).val()?"*":"";e(this).closest(".ezfc-form-element").find(".ezfc-form-element-required-char").text(t)}),e(document).on("click","form .ezfc-element-submit",function(){return!1}),e(document).on("click",".ezfc-form-element-column-left",function(){return n(e(this).closest(".ezfc-form-element")),C(e(this),-1),!1}),e(document).on("click",".ezfc-form-element-column-right",function(){return n(e(this).closest(".ezfc-form-element")),C(e(this),1),!1}),e(document).on("click",".ezfc-form-element-group-toggle",function(){e(this).closest(".ezfc-form-element").find("> .ezfc-group").toggle();var t=["fa-toggle-up","fa-toggle-down"],a=e(this).find(".fa"),n=a.hasClass(t[0])?t[0]:t[1],o=n==t[0]?t[1]:t[0];return a.removeClass(n).addClass(o),!1}),e(document).on("click",".ezfc-html-tinymce-toggle",function(){if("undefined"!=typeof tinyMCE&&"function"==typeof tinyMCE.execCommand){var t=e(this).data("target");tinymce.execCommand("mceToggleEditor",!1,t)}return!1}),e(document).on("click",".ezfc-icon-button",function(){return icon_target=e(this).data("target"),e(".ezfc-icons-dialog").dialog("open"),!1}),e(".ezfc-icons-dialog i").on("click",function(){var t=e(this).data("icon");e("#"+icon_target).val(t),e("#"+icon_target+"-icon").attr("class","fa "+t),e(".ezfc-icons-dialog").dialog("close")}),e(document).on("click",".ezfc-option-image-button",function(t){t.preventDefault();var a,n=this;return a=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1}),a.on("select",function(){var t=a.state().get("selection").first().toJSON();e(n).parent().find("input").val(t.url),e(n).parent().find(".ezfc-option-image-placeholder").attr("src",t.url)}),a.open(),!1}),e(document).on("click",".ezfc-option-image-remove",function(){return e(this).siblings(".ezfc-form-element-option-image").val(""),e(this).siblings(".ezfc-option-image-placeholder").attr("src",""),!1}),e(document).on("click",".ezfc-open-function-dialog",function(){return e("#ezfc-custom-calculation-functions").dialog("open"),!1}),e(document).on("click","[data-toggle]",function(){var t=e(e(this).data("toggle"));t.length<1||(t.hasClass("ezfc-hidden")?t.removeClass("ezfc-hidden"):t.addClass("ezfc-hidden"))}),e(document).on("click","[data-func]",function(){var t=e(this).data("func");if("function"!=typeof V[t])return!1;var a=e(this).data("args");return V[t](this,a),!1}),e("#ezfc_import_file").length>0){var W=e(".ezfc-import-upload"),F=e("#ezfc-import-message"),H=W.siblings(".ezfc-bar");e("#ezfc_import_file").fileupload({formData:{action:"ezfc_backend",data:"action=form_import_upload&nonce="+ezfc_nonce},add:function(t,a){a.submit(),e(".ezfc-loading").fadeIn()},done:function(t,a){if(F.text(""),H.css("width",0).text(""),e(this).val(""),a.result.error)return F.text(a.result.error),!1;var n=e.parseJSON(a.result);l(n),d(n),e(".ezfc-dialog").dialog("close"),e(".ezfc-loading").fadeOut()},progressall:function(e,t){var a=parseInt(t.loaded/t.total*100,10);H.css("width",a+"%").text("Importing...")},replaceFileInput:!1,url:ajaxurl})}String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var L=e("#ezfc-form-options-wrapper");if(L.length>0){var $=L.offset().top;e(window).scroll(function(){e(window).scrollTop()>$+30?L.addClass("ezfc-sticky"):L.removeClass("ezfc-sticky")})}var G=e("#ezfc-rating-dialog");G.length>0&&e("#ezfc-rating-dialog").dialog({height:500,width:700,modal:!0});var V={change_element_dialog:function(t,a){return ezfc_selected_element=a,e("#ezfc-change-element-dialog").dialog("open"),!1},close_data_dialog:function(){e(".ezfc-form-element-data").hide(),e("#ezfc-element-data-modal").fadeOut()},conditional_chain_add:function(t,a){var n=a.split(","),o=n[0],i=n[1],l=V.conditional_chain_get_counter_id(t),c=o+"["+i+"][operator_chain]["+l+"]",s=o+"["+i+"][value_chain]["+l+"]",r=e(t).closest(".ezfc-form-element-conditional-wrapper"),d=V.conditional_chain_get_html(c,s,"","");r.append(d)},conditional_chain_get_html:function(e,t,a,n){var o="<div class='ezfc-conditional-chain-wrapper'>";return o+="<div class='clearfix'></div>",o+="<div class='col-xs-5'></div>",o+="	<div class='col-xs-2'>",o+=Y("select",e,{"class":"ezfc-conditional-chain-operator",options:q,selected:a}),o+="	</div>",o+="	<div class='col-xs-2'>",o+=Y("input",t,{"class":"ezfc-conditional-chain-value",value:n}),o+="	</div>",o+="	<div class='col-xs-3'>",o+="		<button class='button ezfc-form-element-conditional-chain-remove' data-func='conditional_chain_remove'><i class='fa fa-times'></i></button>",o+="	</div>",o+="<div class='clearfix'></div>",o+="</div>"},conditional_chain_get_counter_id:function(t){var a=e(t).closest(".ezfc-form-element-conditional-wrapper").find(".ezfc-conditional-chain-wrapper:last");if(a.length<1)return 0;var n=a.find(".ezfc-conditional-chain-operator").attr("name").split("]"),o=n[4].replace("[",""),i=parseInt(o)+1;return i},conditional_chain_remove:function(t){var a=e(t).closest(".ezfc-conditional-chain-wrapper");a.remove()},element_has_calculation:function(e){return"undefined"==typeof e.calculate||"undefined"==typeof e.calculate[0]?!1:"undefined"==typeof e.calculate[0].operator||0==e.calculate[0].operator?!1:!0},element_has_condition:function(e){return"undefined"==typeof e.conditional||"undefined"==typeof e.conditional[0]?!1:"undefined"==typeof e.conditional[0].action||0==e.conditional[0].action?!1:!0},element_has_discount:function(e){return"undefined"==typeof e.discount||"undefined"==typeof e.discount[0]?!1:"undefined"==typeof e.discount[0].operator||0==e.discount[0].operator?!1:!0}},Y=function(t,a,n){n=n||{};var o="",i=n["class"]||"";switch(t){case"input":o+="<input class='"+i+"' name='"+a+"' value='"+n.value+"' type='text' />";break;case"select":o="<select class='"+i+"' name='"+a+"'>",e.each(n.options,function(e,t){var a="";n.selected&&n.selected==t.value&&(a="selected='selected'"),o+="<option value='"+t.value+"' "+a+">"+t.text+"</option>"}),o+="</select>"}return o}});