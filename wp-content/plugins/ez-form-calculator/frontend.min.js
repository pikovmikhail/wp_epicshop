jQuery(document).ready(function(e){function a(a){var t=e(a),i=t.data("id");q[i]=t.data("vars"),"object"!=typeof q[i]&&(q[i]=e.parseJSON(t.data("vars"))),I[i]=[],1==q[i].price_show_request&&u(i,!1),t.find(".ezfc-element-datepicker").each(function(){var a=e(this),t={};a.data("settings")&&(t=a.data("settings")),a.datepicker({dateFormat:q[i].datepicker_format,minDate:t.minDate?t.minDate:"",maxDate:t.maxDate?t.maxDate:"",numberOfMonths:t.numberOfMonths?parseInt(t.numberOfMonths):1,showAnim:t.showAnim?t.showAnim:"fadeIn",showWeek:"1"==t.showWeek?t.showWeek:!1,firstDay:t.firstDay?t.firstDay:!1})}),t.find(".ezfc-element-timepicker").each(function(){var a=e(this),t={};a.data("settings")&&(t=a.data("settings")),a.timepicker({minTime:t.minTime?t.minTime:null,maxTime:t.maxTime?t.maxTime:null,step:t.step?t.step:30,timeFormat:t.format?t.format:q[i].timepicker_format})}),t.find(".ezfc-element-daterange").each(function(){var a=e(this),t=q[i].datepicker_format;a.datepicker(a.hasClass("ezfc-element-daterange-from")?{dateFormat:t,minDate:a.data("mindate"),maxDate:a.data("maxdate"),onSelect:function(i){var n=a.data("mindays")||0,r=e.datepicker.parseDate(t,i);r.setDate(r.getDate()+n),a.siblings(".ezfc-element-daterange-to").datepicker("option","minDate",r),a.trigger("change")}}:{dateFormat:q[i].datepicker_format,minDate:a.data("mindate"),maxDate:a.data("maxdate"),onSelect:function(i){var n=a.data("mindays")||0,r=e.datepicker.parseDate(t,i);r.setDate(r.getDate()-n),a.siblings(".ezfc-element-daterange-from").datepicker("option","maxDate",r),a.trigger("change")}})}),t.find(".ezfc-element-colorpicker").each(function(){var a=e(this),i=a.parents(".ezfc-element").find(".ezfc-element-colorpicker-input"),n=a.colorpicker({container:a}).on("changeColor.colorpicker",function(e){a.css("background-color",e.color.toHex()),i.val(e.color.toHex())});e(i).on("click focus",function(){n.colorpicker("show")}).on("change",function(){n.colorpicker("setValue",t.val())})});var n=t.find(".ezfc-step");if(n.length>0){var r=n.last();t.find(".ezfc-summary-wrapper").appendTo(r),t.find(".ezfc-submit-wrapper").appendTo(r).addClass("ezfc-submit-step"),y(r.find("input"),t)}if(e(".ezfc-custom-element[data-group]").each(function(){var a=e(this),t=a.data("group"),i=e("#ezfc_element-"+t);if("group"==i.data("element")&&i.length>0){var n=i.find("> .ezfc-group-elements");a.appendTo(n)}}),l(t),q[i].use_woocommerce){var c=".woocommerce form.cart, .woocommerce .price";e(c).hide()}var s=parseInt(q[i].step_indicator_start)+1;s>1&&t.find(".ezfc-step-indicator").hide(),"2"==ezfc_vars.debug_mode&&(t.append("<button id='ezfc-show-all-elements'>Show/hide elements</button>"),e("#ezfc-show-all-elements").click(function(){return t.hasClass("ezfc-debug-visible")?(t.removeClass("ezfc-debug-visible"),t.find(".ezfc-tmp-visible").removeClass("ezfc-tmp-visible").hide()):(t.addClass("ezfc-debug-visible"),t.find(".ezfc-hidden").addClass("ezfc-tmp-visible").show().css("display","inline-block")),!1}))}function t(a){var t=e(a).data("id");return z(a),q[t].price_requested=0,q[t].summary_shown=0,e(a).find(".ezfc-summary-wrapper").fadeOut(),1==q[t].price_show_request?(u(t,!1),!1):(l(a),void x(a))}function i(a,t){e(".ezfc-submit-icon").addClass("ezfc-submit-icon-show");var i=e(a).find(".ezfc-submit-icon");i.fadeIn();var n=e(a).find("input[type='submit']");n.attr("disabled","disabled"),e(a).find(".ezfc-custom-hidden:not(.ezfc-element-wrapper-fileupload)").each(function(){e(this).find("input, :selected").val("__HIDDEN__").addClass("ezfc-has-hidden-placeholder");var a=e(this).find(".ezfc-element-radio:not(:has(:radio:checked))");a.length&&e(a).first().find("input").prop("checked",!0)});var r=e(a).data("id"),c="id="+r+"&"+e(a).serialize();c+="&url="+encodeURI(window.location.href),0==q[r].price_requested&&(c+="&price_requested=1"),0==q[r].summary_shown&&(c+="&summary=1"),-1!=t&&(c+="&step="+t),q[r].preview&&(c+="&preview="+q[r].preview),N("ezfc_before_submission",{form:e(a),form_vars:q[r],id:r}),e.ajax({type:"post",url:ezfc_vars.ajaxurl,data:{action:"ezfc_frontend",data:c},success:function(c){if(e(".ezfc-submit-icon").removeClass("ezfc-submit-icon-show"),n.removeAttr("disabled"),i.fadeOut(),"1"==ezfc_vars.debug_mode&&console.log(c),c=e.parseJSON(c),!c)return e(a).find(".ezfc-message").text("Something went wrong. :("),"undefined"!=typeof Recaptcha&&Recaptcha.reload(),v(a,!0),!1;if(c.error){if(v(a,!0),c.id){var s=!0,d="#ezfc_element-"+c.id,o=e(d).find(".ezfc-element").first(),l=e(a).find(".ezfc-step-active").length>0?!0:!1;if(l){var f=parseInt(e(d).parents(".ezfc-step").data("step"));f!=t&&-1!=t&&(s=!1,_(a,t+1))}if(s){o.length||(o=e(d));var p=new Opentip(o,{delay:800,hideDelay:.1,hideTriggers:["closeButton","target"],removeElementsOnHide:!0,showOn:null,target:d,tipJoint:ezfc_vars.required_text_position||"middle right"});if(p.setContent(c.error),p.show(),"undefined"!=typeof ezfc_vars.required_text_auto_hide){var m=1e3*parseFloat(ezfc_vars.required_text_auto_hide);m>0&&setTimeout(function(){p&&p.hide()},m)}q[r].disable_error_scroll||b(d)}}else{var g=e(a).parents(".ezfc-wrapper").find(".ezfc-message");g.text(c.error).fadeIn().delay(7500).fadeOut()}return"undefined"!=typeof Recaptcha&&Recaptcha.reload(),!1}if(c.step_valid)return v(a),_(a,t+1),!1;if(c.summary)return e(a).find(".ezfc-summary-wrapper").fadeIn().find(".ezfc-summary").html(c.summary),q[r].summary_shown=1,v(a),!1;if("undefined"!=typeof Recaptcha&&Recaptcha.reload(),c.paypal)n.attr("disabled","disabled"),window.location.href=c.paypal;else{if(c.price_requested||0===c.price_requested)return void u(r,!0,c.price_requested);N("ezfc_submission_success",{form:e(a),form_vars:q[r],id:r,price:price,response:c});var z=e(".ezfc-success-text[data-id='"+r+"']");if(z.html(c.success),1==q[r].reset_after_submission)return h(a),void z.fadeIn().delay(7500).fadeOut();if(1==q[r].hide_all_forms?e(".ezfc-form, .ezfc-required-notification").fadeOut():(e(a).fadeOut(),e(a).find(".ezfc-required-notification").fadeOut()),1==q[r].scroll_to_success_message?z.fadeIn(400,function(){b(z,-200)}):z.fadeIn(),q[r])if("undefined"!=typeof q[r].redirect_url&&q[r].redirect_url.length>0){var k="";1==q[r].redirect_forward_values&&(k=e(a).serialize());var w=-1==q[r].redirect_url.indexOf("?")?"?":"&";window.location.href=q[r].redirect_url+w+k}else if("undefined"!=typeof q[r].refresh_page_after_submission&&1==q[r].refresh_page_after_submission){var x=Math.max(0,Math.abs(parseInt(q[r].redirect_timer)));setTimeout(function(){window.location.reload()},1e3*x)}}}})}function n(a,t,i,n){var r=i.data("value_external");if(r&&e(r).length>0){var c;c=e(r).is("input[type='radio']")?e(r).find(":checked").val():e(r).is("input, input[type='text'], textarea")?e(r).val():e(r).is("select")?e(r).find(":selected").text():e(r).text(),"input"==n||"numbers"==n||"subtotal"==n?i.find("input").val(c):"dropdown"==n?(i.find(":selected").removeAttr("selected"),i.find("option[value='"+c+"']").attr("selected","selected")):"radio"==n?(i.find(":checked").removeAttr("checked"),i.find("input[value='"+c+"']").attr("checked","checked")):"checkbox"==n?(i.find(":checked").removeAttr("checked"),i.find("input[value='"+c+"']").attr("checked","checked")):"textfield"==n&&i.find("textarea").val(c),I[t][r]||(I[t][r]=1,e(r).on("change keyup",function(){l(e(a))}))}}function r(a,t,i,n){var r=i.data("conditional_action"),c=i.data("conditional_operator"),s=i.data("conditional_target"),d=i.data("conditional_values"),o=i.data("conditional_target_value"),l=i.data("conditional_notoggle"),f=i.data("conditional_redirects"),u=i.data("conditional_use_factor"),p=i.data("conditional_row_operator");if(r&&0!=r){var m=r.toString().split(","),v=c.toString().split(","),h=s.toString().split(","),b=d.toString().split(","),g=o.toString().split(","),z=l.toString().split(","),w=f.toString().split(","),x=u.toString().split(","),y=p.toString().split(","),N=i.val(),C=1;if("input"==n)N=i.find("input").val();else if("numbers"==n||"hidden"==n||"subtotal"==n||"set"==n)N=parseFloat(i.find("input").val()),C=i.find("input").data("factor");else if("dropdown"==n)N=i.find(":selected").data("value");else if("radio"==n)N=i.find(":checked").data("value");else if("checkbox"==n)N=0,i.find(":checked").each(function(a,t){N+=parseFloat(e(t).data("value"))});else if("daterange"==n){var F=[e(i).find(".ezfc-element-daterange-from").datepicker("getDate"),e(i).find(".ezfc-element-daterange-to").datepicker("getDate")];N=D(F[0],F[1]),C=i.find("input").data("factor")}else"starrating"==n&&(N=parseFloat(i.find(":checked").val()),isNaN(N)&&(N=0));e.each(m,function(r,c){var s;if(s="submit_button"==h[r]?e(a).find(".ezfc-submit"):e("#ezfc_element-"+h[r]),!(s.length<1&&w.length<1)){1==x[r]&&(C=parseFloat(C),isNaN(C)||(N*=C));var d=[{operator:v[r],value:b[r]}],o=i.data("conditional_chain_length");if(o>0){var l=i.data("conditional_operator_chain_"+r),f=i.data("conditional_value_chain_"+r);if(l){var u=l.toString().split(","),p=f.toString().split(",");e.each(u,function(e,a){d.push({operator:a,value:p[e]})})}}var m=!1;e.each(d,function(e,a){var t=a.value;if(t=1==i.data("is_currency")&&"in"!=a.operator?parseFloat(a.value):a.value,"input"==n)m=t.toLowerCase()==s.val().toLowerCase();else{var c=a.value.split(":");switch(a.operator){case"gr":m=N>t;break;case"gre":m=N>=t;break;case"less":m=t>N;break;case"lesse":m=t>=N;break;case"equals":m=N==t;break;case"between":m=c.length<2?!1:N>=c[0]&&N<=c[1];break;case"not":m=c.length<2?N!=t:N<c[0]&&N>c[1];break;case"hidden":m=i.hasClass("ezfc-custom-hidden");break;case"visible":m=!i.hasClass("ezfc-custom-hidden");break;case"mod0":m=N>0&&N%t==0;break;case"mod1":m=N>0&&N%t!=0;break;case"bit_and":m=N&t;break;case"bit_or":m=N|t;break;case"empty":"undefined"==typeof N&&(m=!0),m="number"==typeof N?isNaN(N):N.length<1;break;case"notempty":m="undefined"==typeof N?!1:"number"==typeof N?!isNaN(N):N.length>0;break;case"in":if("undefined"==typeof N)m=!1;else{var d=t.split("|");m=!1;for(var o in d)if(N==d[o])return void(m=!0)}break;default:m=!1}}if("undefined"!=typeof y[r]&&1==y[r]){if(m)return!1}else if(!m)return!1});var F,D,I=z[r],S=s.data("element");if("group"==S&&s.push(e(s).find("> .ezfc-custom-element")),"set"==c&&m)"input"==S||"numbers"==S||"subtotal"==S||"set"==S?s.find("input").val(g[r]):"dropdown"==S?(s.find(":selected").removeAttr("selected"),s.find("option[data-value='"+g[r]+"']").prop("selected","selected")):"radio"==S?(s.find(":checked").removeAttr("checked"),s.find("input[data-value='"+g[r]+"']").prop("checked",!0)):"checkbox"==S?s.find("input[data-value='"+g[r]+"']").prop("checked",!0):s.text(g[r]);else if("activate"==c)m?"submit"==S?s.prop("disabled",!1):"group"==S?s.find("[data-calculate_enabled]").data("calculate_enabled",1):s.data("calculate_enabled",1):1!=I&&("submit"==S?s.prop("disabled",!0):"group"==S?s.find("[data-calculate_enabled]").data("calculate_enabled",0):s.data("calculate_enabled",0));else if("deactivate"==c)m?"submit"==S?s.prop("disabled",!0):"group"==S?s.find("[data-calculate_enabled]").data("calculate_enabled",0):s.data("calculate_enabled",0):1!=I&&("submit"==S?s.prop("disabled",!1):"group"==S?s.find("[data-calculate_enabled]").data("calculate_enabled",1):s.data("calculate_enabled",1));else if("redirect"==c&&m){var O=e(a).parents(".ezfc-wrapper").find(".ezfc-message");O.text(q[t].redirect_text).fadeIn(),e(a).fadeOut(),setTimeout(function(){window.location.href=w[r]},1e3*q[t].redirect_timer)}else if("step_goto"!=c&&"step_prev"!=c&&"step_next"!=c||!m){if("show"==c)F="removeClass",D="addClass";else{if("hide"!=c)return;F="addClass",D="removeClass"}m?(s[F]("ezfc-hidden ezfc-custom-hidden"),"show"==c?s.addClass("ezfc-fade-in"):e(s).fadeOut(500,function(){s.removeClass("ezfc-fade-in"),1==q[t].clear_selected_values_hidden&&k()})):1!=I&&(s[D]("ezfc-hidden ezfc-custom-hidden"),"show"==c?s.removeClass("ezfc-fade-in"):s.addClass("ezfc-fade-in"))}else{var T=parseInt(e(a).find(".ezfc-step-active").data("step")),A=0;switch(c){case"step_prev":if(0==T)return;A=T-1;break;case"step_next":var M=e(a).find(".ezfc-step-start").length;if(T==M-1)return;A=T+1;break;case"step_goto":var E=e(a).find(".ezfc-step-start[data-id='"+h[r]+"']");if(E.length<1)return;A=parseInt(E.data("step"))}_(e(a),A,0)}}})}}function c(a,t,i,n,r){var c=i.data("calculate_enabled"),s=i.data("calculate_operator")||0,d=i.data("calculate_target")||0,o=i.data("calculate_values")||0,l=i.data("overwrite_price"),f=i.data("add_to_price"),u=i.find(".ezfc-element-numbers, .ezfc-element-input-hidden, .ezfc-element-subtotal, .ezfc-element-daterange-container, .ezfc-element-set, .ezfc-element-extension, :selected, :checked, .ezfc-element-custom-calculation"),p=["ceil","floor","round","abs","subtotal"];return e(u).each(function(a,t){var u={};if(e(this).data("settings")&&(u=e(this).data("settings")),!(e(i).is(":visible")||u.hasOwnProperty("calculate_when_hidden")&&0!=u.calculate_when_hidden))return void F("calculate",i,"Skipped as element is hidden and calculate_when_hidden is not enabled.");if(!(c&&0!=c||d||o||"set"==n||"subtotal"==n||"hidden"==n||"extension"==n||"custom_calculation"==n))return void F("calculate",i,"No target or values were found to calculate with. Subtotal, Hidden and Set elements are skipped.");if((!c||0==c)&&"custom_calculation"!=n)return void F("calculate",i,"Calculation is disabled.");var m=parseFloat(e(t).data("factor")),v=e(t).val(),h=g(i,null,!1),_=h/100,b=v.indexOf("%")>=0;(!h||isNaN(h))&&(h=0),m&&!isNaN(m)||0===m||(m=1);var z=h;switch(n){case"numbers":case"extension":z=h;break;case"hidden":if(e(t).data("use_woocommerce_price")){var k=parseFloat(e("meta[itemprop='price']").attr("content"));isNaN(k)&&(k=0),z=k,e(t).val(k)}else z=h;break;case"dropdown":case"radio":case"checkbox":z=parseFloat(e(t).data("value")),isNaN(z)&&(z=0);break;case"subtotal":z=r;break;case"daterange":var x=[e(t).find(".ezfc-element-daterange-from").datepicker("getDate"),e(t).find(".ezfc-element-daterange-to").datepicker("getDate")];z=D(x[0],x[1])*m;break;case"custom_calculation":var y=e(i).find(".ezfc-element-custom-calculation").data("function");if(z=window[y](r),c&&(z=parseFloat(z)),e(i).find(".ezfc-element-custom-calculation-input").val(z),2==ezfc_vars.debug_mode){var N=e(i).find(".ezfc-element-custom-calculation script").text();F("custom_calculation",i,"custom_calculation:\n"+N)}}b&&(z=r*_);var C=s.toString().split(",");if(calc_target_elements=d.toString().split(","),calc_custom_values=o.toString().split(","),C.length>0&&0!=C[0]&&e.each(C,function(a,n){if(!n)return void F("calculate",i,"#"+a+": No operator found here.");var c=[];if(-1==e.inArray(n,p)&&(c=e("#ezfc_element-"+calc_target_elements[a]),c.hasClass("ezfc-custom-hidden")))return void F("calculate",i,"#"+a+": Skipping this element as it is conditionally hidden.");var s,d=calc_custom_values[a];if(c.length>0){var o=c.data("element");if("numbers"==o||"subtotal"==o||"hidden"==o||"set"==o){var f=c.find("input"),u=parseFloat(f.data("factor"));(!u||isNaN(u))&&(u=1),s=w(f.val())*u}else if("dropdown"==o)s=parseFloat(c.find(":selected").data("value"));else if("radio"==o)s=parseFloat(c.find(":checked").data("value"));else if("checkbox"==o)s=0,c.find(":checked").each(function(a,t){s+=parseFloat(e(t).data("value"))});else if("daterange"==o){var m=[e(c).find(".ezfc-element-daterange-from").datepicker("getDate"),e(c).find(".ezfc-element-daterange-to").datepicker("getDate")],u=parseFloat(e(c).find(".ezfc-element-daterange-container").data("factor"));(!u||isNaN(u))&&(u=1),s=D(m[0],m[1])*u}else if("custom_calculation"==o){var v=e(c).find(".ezfc-element-custom-calculation"),_=v.data("function"),b=v.data("calculate_enabled");s=window[_](d),1==b&&(s=parseFloat(s))}else"starrating"==o&&(s=parseFloat(e(c).find(":checked").val()),isNaN(s)&&(s=0))}else"0"!=d&&(s=parseFloat(d));switch((!s||isNaN(s))&&(s=0),n){case"add":z+=s;break;case"subtract":z-=s;break;case"multiply":z*=s;break;case"divide":if(0==s)return void F("calculate",i,"#"+a+": Division by 0.");z/=s,"1"==e(t).data("calculate_before")&&(l=1,z=s/h);break;case"equals":z=s;break;case"power":z=Math.pow(z,s);break;case"ceil":z=Math.ceil(z);break;case"floor":z=Math.floor(z);break;case"round":z=Math.round(z);break;case"abs":z=Math.abs(z);break;case"subtotal":z=r;break;case"log":if(0==s)return;z=Math.log(s);break;case"log2":if(0==s)return;z=Math.log2(s);break;case"log10":if(0==s)return;z=Math.log10(s)}F("calculate",i,"#"+a+": operator = "+n+"\ntarget_value = "+s+"\ncalc_value = "+d+"\naddPrice = "+z)}),F("calculate",i,"\nprice = "+r+"\naddPrice = "+z+"\nfactor = "+m),1==f?"1"==l?r=z:"1"==c&&(r+=z):1==l&&(I=z),"subtotal"==n||"set"==n){var I;I=1==f&&1==l?r:z;var S=2;e(t).data("settings")&&(u=e(t).data("settings"),S=u.precision);var O=w(I.toFixed(S),!0);i.find("input").val(O)}}),r}function s(a,t,i,n,r){var c=i.data("discount_range_min"),s=i.data("discount_range_max"),d=i.data("discount_operator"),o=i.data("discount_values");if(o||0==o){var l=c.toString().split(","),f=s.toString().split(","),u=d.toString().split(","),p=o.toString().split(","),m=0,v=1;if("input"==n||"numbers"==n||"subtotal"==n||"hidden"==n||"extension"==n){var h=i.find("input");v=parseFloat(h.data("factor")),v&&!isNaN(v)||0===v||(v=1),m=parseFloat(h.val())}else if("dropdown"==n)m=parseFloat(i.find(":selected").data("value"));else if("radio"==n)m=parseFloat(i.find(":checked").data("value"));else if("checkbox"==n)m=0,i.find(":checked").each(function(a,t){m+=parseFloat(e(t).data("value"))});else if("daterange"==n){var _=[i.find(".ezfc-element-daterange-from").datepicker("getDate"),i.find(".ezfc-element-daterange-to").datepicker("getDate")];m=D(_[0],_[1])}e.each(u,function(a,t){if(!(p[a].length<1)){l[a]||0===l[a]||(l[a]=Number.NEGATIVE_INFINITY),f[a]||0===f[a]||(f[a]=Number.POSITIVE_INFINITY);var c;if(m>=parseFloat(l[a])&&m<=parseFloat(f[a])){var s,d=parseFloat(p[a]);switch(t){case"add":s=d,c=s,r+=c;break;case"subtract":s=d,c=s,r-=c;break;case"percent_add":s=m*v*(d/100),c=r+s,r=c;break;case"percent_sub":s=m*v*(d/100),c=r-s,r=c;break;case"equals":s=d,c=s,r=c}"subtotal"!=n||isNaN(c)||e(i).find("input").val(c.toFixed(2)),F("discount",i,"discount = "+s+"\nprice after discount = "+r)}}})}return r}function d(a,t,i){var n=i.data("set_operator"),r=i.data("set_elements");if(r){var c,s=r.toString().split(",");e.each(s,function(a,t){var r=e("#ezfc_element-"+t);if(r){var s=e(r).data("element");if("input"==s||"numbers"==s||"subtotal"==s||"hidden"==s||"extension"==s||"set"==s){var d=r.find("input");factor=parseFloat(d.data("factor")),factor&&!isNaN(factor)||0===factor||(factor=1),el_value=parseFloat(d.val());var o=i.find("input");if(o){var l=o.data("settings");if("undefined"!=typeof l.use_factor){var f=parseInt(l.use_factor);1==f&&(el_value*=factor)}}}else if("dropdown"==s)el_value=parseFloat(r.find(":selected").data("value"));else if("radio"==s)el_value=parseFloat(r.find(":checked").data("value"));else if("checkbox"==s)el_value=0,r.find(":checked").each(function(a,t){el_value+=parseFloat(e(t).data("value"))});else if("daterange"==s){var u=[r.find(".ezfc-element-daterange-from").datepicker("getDate"),r.find(".ezfc-element-daterange-to").datepicker("getDate")];el_value=D(u[0],u[1])}if(0==a)return void(c=el_value);switch(n){case"min":el_value<c&&(c=el_value);break;case"max":el_value>c&&(c=el_value);break;case"avg":case"sum":c+=el_value;break;case"dif":c-=el_value;break;case"prod":c*=el_value;break;case"quot":0!=el_value&&(c/=el_value)}}}),"avg"==n&&(c/=s.length),i.find("input").val(c)}}function o(a){var t=0;return C(),e(a).find(".ezfc-custom-element").each(function(i,o){var l=e(a).data("id"),f=e(o),u=e(o).data("element");e(this).hasClass("ezfc-hidden")&&"subtotal"!=u&&"hidden"!=u&&1==q[l].calculate_old||(n(a,l,f,u),r(a,l,f,u),e(this).hasClass("ezfc-hidden")&&"subtotal"!=u&&"hidden"!=u||(d(a,l,f,u),t=c(a,l,f,u,t),t=s(a,l,f,u,t),r(a,l,f,u)))}),t}function l(a,t){var i=e(a).data("id");return t&&0===t||(price=o(e(a))),p(e(a)),1==q[i].price_show_request&&0==q[i].price_requested?void u(i,!1):("undefined"==typeof S[i]&&(S[i]=0),void(S[i]!=price&&(0!=q[i].counter_duration?e(a).find(".ezfc-price-value").countTo({from:S[i],to:price,speed:q[i].counter_duration,refreshInterval:q[i].counter_interval,formatter:function(e){return f(i,e)}}):e(a).find(".ezfc-price-value").text(f(i,price)),S[i]=price)))}function f(e,a,t,i){{var n=O;t||q[e].currency}q[e].price_format&&q[e].price_format.length>0&&(n=q[e].price_format),i&&i.length>0&&(n=i),isNaN(a)&&(a=0);var r=numeral(a).format(n);return r}function u(a,t,i){var n=e(".ezfc-form[data-id='"+a+"']");t?(S[a]=0,q[a].price_requested=1,l(n,i),x(n)):(q[a].price_requested=0,e(n).find(".ezfc-price-value").text(q[a].price_show_request_before),e(n).find(".ezfc-submit").val(q[a].price_show_request_text))}function p(a){e(a).find("[data-element='subtotal']").each(function(t,i){var n,r,c=e(i).find(".ezfc-element-subtotal"),s=c.val(),d=null;c.data("settings")&&(n=c.data("settings"),d=n.price_format),r=f(e(a).data("id"),s,null,d),e(i).find(".ezfc-text").text(r)}),e(a).find("[data-element='set']").each(function(t,i){var n,r,c=e(i).find(".ezfc-element-set"),s=c.val(),d=null;c.data("settings")&&(n=c.data("settings"),d=n.price_format),r=f(e(a).data("id"),s,null,d),e(i).find(".ezfc-text").text(r)})}function m(){e(".ezfc-fixed-price").each(function(){var a=e(this).offset(),t=e(this).data("id"),i=e(".ezfc-form[data-id='"+t+"']"),n=i.outerHeight(),r=i.offset(),c=e(window).scrollTop(),s=parseFloat(q[t].price_position_scroll_top),d=r.top-c-s;0>d&&d>-n&&e(this).offset({top:c+s}),d>0&&a.top>r.top&&e(this).offset({top:r.top})})}function v(a,t){e(a).find(".ezfc-custom-hidden").each(function(){e.each(e(this).find("input, :selected"),function(){e(this).val(e(this).data("index")).removeAttr("disabled")})}),x(a,t)}function h(a){a.find(".ezfc-custom-element").each(function(){var a=e(this).data("element"),t=e(this).find("[data-initvalue]").data("initvalue");switch(a){case"checkbox":e(this).find("input").each(function(){var a=e(this).data("initvalue");1==a?e(this).prop("checked",!0):e(this).removeAttr("checked")});break;case"dropdown":e(this).find("option").removeAttr("selected"),e(this).find("option[data-index='"+t+"']").prop("selected",!0);break;case"radio":e(this).find("input").removeAttr("checked"),e(this).find("input[data-initvalue]").prop("checked",!0);break;default:e(this).find("input").val(t)}}),a.find(".ezfc-selected").removeClass("ezfc-selected"),_(a,0,0),t(a)}function _(a,t,n){var r=parseInt(a.find(".ezfc-step-active").data("step")),c=a.find(".ezfc-step[data-step='"+r+"']"),s=a.data("id");if(r!=t){if(1==n&&1==q[s].verify_steps){var d=a.find(".ezfc-submit-icon");return d.fadeIn(),i(a,t-1),void e(".ezfc-has-hidden-placeholder").val("").removeClass("ezfc-has-hidden-placeholder")}var o=parseInt(q[s].step_indicator_start)-1;return c.fadeOut(200,function(){var i=a.find(".ezfc-step[data-step='"+t+"']");i.fadeIn(200).addClass("ezfc-step-active"),e(this).removeClass("ezfc-step-active"),t>=o?a.find(".ezfc-step-indicator").fadeIn():a.find(".ezfc-step-indicator").hide(),b(i,parseFloat(ezfc_vars.scroll_steps_offset))}),a.find(".ezfc-step-indicator-item").each(function(){var a=parseInt(e(this).data("step"));e(this).removeClass("ezfc-step-indicator-item-active"),t>=a&&e(this).addClass("ezfc-step-indicator-item-active")}),!1}}function b(a,t){var i=e(a).offset();if("undefined"!=typeof i&&0!=ezfc_vars.auto_scroll_steps){{var n=t||50;i.top+n}e("html, body").animate({scrollTop:i.top+n})}}function g(a,t,i){a||(a=e("#ezfc_element-"+t));var n=(a.data("decimal_point"),a.data("element")),r=a.find("input").val(),c=w(r),s=c/100,d=r?r.indexOf("%")>=0:0;(!c||isNaN(c))&&(c=0);var o=c;switch(n){case"subtotal":case"numbers":case"hidden":case"extension":case"set":var l=a.find("input"),f=parseFloat(l.data("factor"));f&&!isNaN(f)||0===f||(f=1),o=r,i||(c=w(l.val()),o=c*f);break;case"dropdown":case"radio":case"checkbox":a.find(":selected, :checked").each(function(){i?("object"!=typeof o&&(o=[]),o.push(e(this).data("value"))):o+=parseFloat(e(this).data("value"))});break;case"daterange":var u=[a.find(".ezfc-element-daterange-from").datepicker("getDate"),a.find(".ezfc-element-daterange-to").datepicker("getDate")],f=parseFloat(a.find(".ezfc-element-daterange-from").data("factor"));f&&!isNaN(f)||0===f||(f=1),o=i?u:D(u[0],u[1])*f;break;case"custom_calculation":{a.find(".ezfc-element-custom-calculation").data("function")}o=a.find(".ezfc-element-custom-calculation-input").val(),i||(o=parseFloat(o));break;case"starrating":o=parseFloat(a.find(":checked").val()),isNaN(o)&&(o=0)}return d&&(o=price*s),i?o:(isNaN(o)&&(o=0),o?parseFloat(o):0)}function z(a){var t=e(a).data("id");1==q[t].clear_selected_values_hidden&&e(a).find(".ezfc-custom-hidden").each(function(){e(this).find("input[type='text']").val(""),e(this).find(":checkbox, :radio").prop("checked",!1)})}function k(e){var a=e.data("element");"input"==a||"numbers"==a||"subtotal"==a?cond_target.find("input").val(""):"dropdown"==a?cond_target.find(":selected").removeAttr("selected"):("radio"==a||"checkbox"==a)&&cond_target.find(":checked").removeAttr("checked")}function w(e,a){var t=ezfc_vars.price_format_dec_point,i=String(e);return t.length<1&&(t="."),a?","==t&&(i=i.replace(",",""),i=i.replace(".",",")):","==t&&(i=i.replace(".",""),i=i.replace(",",".")),i}function x(a,t){var i=e(a).data("id"),n=q[i].submit_text["default"];if(1==q[i].price_show_request&&t)return u(i,!1),!1;if(1==q[i].summary_enabled&&0==q[i].summary_shown)n=q[i].submit_text.summary;else if(1==q[i].use_paypal)n=q[i].submit_text.paypal;else if(1==q[i].use_woocommerce)n=q[i].submit_text.woocommerce;else{var r=!1,c=e(a).find(".ezfc-element-wrapper-payment");c.length>0&&(r="paypal"==e(c).find(":checked").data("value")),n=r?q[i].submit_text.paypal:q[i].submit_text["default"]}e(a).find(".ezfc-submit").val(n)}function y(a,t){e(a).keypress(function(e){e.keyCode||e.which;13==e.which&&(i(t,-1),e.preventDefault())})}function N(e,a){var t=window[e];"function"==typeof t&&(a=a||{},t(a))}function C(){e(".ezfc-debug-info").remove()}function F(a,t,i){if(2==ezfc_vars.debug_mode){var n=e(t).attr("id");n&&(n=n.split("ezfc_element-")[1]);var r=e(t).data("element");e(t).append("<pre class='ezfc-debug-info ezfc-debug-type-"+a+"'>[["+r+" #"+n+"]]\n["+a+"]\n"+i+"</pre>"),console.log(i,t)}}function D(e,a){return e&&a?(a-e)/1e3/60/60/24:0}if("undefined"==typeof EZFC_LOADED){EZFC_LOADED=!0,ezfc_functions={calculate_price:function(a){var t=e(".ezfc-form[data-id='"+a+"']");return o(t)},get_value_from:function(e,a){return g(null,e,a)}};var I=[],S=[];numeral.language("ezfc",{delimiters:{decimal:ezfc_vars.price_format_dec_point,thousands:ezfc_vars.price_format_dec_thousand},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var a=e%10;return 1===~~(e%100/10)?"th":1===a?"st":2===a?"nd":3===a?"rd":"th"},currency:{symbol:"$"}}),numeral.language("ezfc");var O=ezfc_vars.price_format?ezfc_vars.price_format:"0,0[.]00";numeral.defaultFormat(O),e.datepicker.setDefaults(e.datepicker.regional[ezfc_vars.datepicker_language]),e(".ezfc-element-option-image").click(function(){if(e(this).hasClass("ezfc-element-radio-image")){var a=e(this).parents(".ezfc-element-wrapper-radio");a.find(".ezfc-selected").removeClass("ezfc-selected"),a.find(".ezfc-element-radio-input").prop("checked",!1).trigger("change"),e(this).siblings(".ezfc-element-radio-input").prop("checked",!0).trigger("change"),e(this).addClass("ezfc-selected")}else if(e(this).hasClass("ezfc-element-checkbox-image")){var t=e(this).siblings(".ezfc-element-checkbox-input");t.prop("checked")?(t.prop("checked",!1).trigger("change"),e(this).removeClass("ezfc-selected")):(t.prop("checked",!0).trigger("change"),e(this).addClass("ezfc-selected"))}});var q=[];e(".ezfc-form").each(function(){a(this)}),e(".ezfc-element-fileupload").each(function(a,t){var i=e(this).parents(".ezfc-element"),n=e(i).find(".ezfc-upload-button"),r=e(this).parents("form.ezfc-form"),c=r.find("input[name='id']").val(),s=r.find("input[name='ref_id']").val(),d={action:"ezfc_frontend_fileupload",data:"id="+c+"&ref_id="+s};e(this).fileupload({formData:d,dataType:"json",add:function(a,r){e(i).find(".ezfc-bar").css("width",0),e(i).find(".progress").addClass("active"),e(i).find(".ezfc-fileupload-message").text(""),n.click(function(){return""==e(t).val()?!1:(r.submit(),e(n).attr("disabled","disabled"),a.preventDefault(),!1)})},done:function(a,t){return t.result.error?(e(n).removeAttr("disabled"),e(i).find(".ezfc-fileupload-message").text(t.result.error),e(i).find(".ezfc-bar").css("width",0),!1):(e(this).attr("multiple")&&(e(this).val(""),e(n).removeAttr("disabled")),e(i).find(".progress").removeClass("active"),void e(i).find(".ezfc-fileupload-message").text(ezfc_vars.upload_success))},progressall:function(a,t){var n=parseInt(t.loaded/t.total*100,10);e(i).find(".ezfc-bar").css("width",n+"%")},replaceFileInput:!1,url:ezfc_vars.ajaxurl})}),e(".ezfc-overview").dialog({autoOpen:!1,modal:!0}),e(".ezfc-form input, .ezfc-form select").on("change keyup",function(){var a=e(this).parents(".ezfc-form");t(a)}),e(".ezfc-slider").each(function(a,t){var i=e(this),n=e(t).siblings(".ezfc-slider-element"),r=n.slider({min:i.data("min")||0,max:i.data("max")||100,step:i.data("stepsslider")||1,value:i.val()||0,slide:function(e,a){var t=w(a.value,!0);i.val(t),i.trigger("change")}});i.on("change keyup",function(){r.slider("value",i.val())}),i.hasClass("ezfc-pips")&&n.slider("pips",{rest:"label",step:i.data("stepspips")||1}),i.draggable()}),e(".ezfc-spinner").each(function(){var a=e(this);a.spinner({min:a.data("min")||0,max:a.data("max")||100,step:a.data("stepsspinner")||1,change:function(){a.trigger("change")},spin:function(e,t){var i=w(t.value,!0);a.val(i),a.trigger("change")},start:function(){var e=w(a.val());a.val(e)},stop:function(){var e=w(a.val(),!0);a.val(e)}})}),e(".ezfc-step-button").on("click",function(){var a=e(this).parents(".ezfc-form"),t=parseInt(a.find(".ezfc-step-active").data("step")),i=t+(e(this).hasClass("ezfc-step-next")?1:-1),n=e(this).hasClass("ezfc-step-next")?1:0;return _(a,i,n),!1}),e(".ezfc-step-indicator-item-active").on("click",function(){var a=e(this).closest(".ezfc-form"),t=parseInt(e(this).data("step"));return _(a,t,0),!1}),e(".ezfc-element-wrapper-payment input").on("change",function(){var a=e(this).parents(".ezfc-form").data("id");if(1!=q[a].price_show_request&&!q[a].summary_enabled){var t="paypal"==e(this).data("value"),i=t?q[a].submit_text.paypal:q[a].submit_text["default"];e(this).parents(".ezfc-form").find(".ezfc-element-submit").val(i)}}),e(window).scroll(function(){m()}),m(),e(".ezfc-form").submit(function(a){var t=e(this),n=t.data("id");return 1==q[n].hard_submit?!0:(i(t,-1),a.preventDefault(),!1)}),e(".ezfc-reset").click(function(){var a=e(this).parents(".ezfc-form");return h(a),!1}),e(".ezfc-collapse-title-wrapper").on("click",function(){var a=e(this).closest(".ezfc-element-wrapper-group").find("> .ezfc-group-elements");a.slideToggle(500);var t="fa-chevron-circle-down",i="fa-chevron-circle-right",n=e(this).find(".ezfc-collapse-icon i");n.hasClass(t)?n.removeClass(t).addClass(i):n.removeClass(i).addClass(t)})}}),ezfc_functions={};